{"ast":null,"code":"import _regeneratorRuntime from \"D:/luarKampus/Magang/Bestada/laxmi.front.web.user/node_modules/.pnpm/@babel+runtime@7.12.5/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"D:/luarKampus/Magang/Bestada/laxmi.front.web.user/node_modules/.pnpm/@babel+runtime@7.12.5/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"D:/luarKampus/Magang/Bestada/laxmi.front.web.user/node_modules/.pnpm/@babel+runtime@7.12.5/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from \"axios\"; // import frenchPlacket from \"../../../public/img/placket/Placket French.svg\";\n\nimport { useRouter } from \"next/router\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { BlazerListStyle, ShirtListStyle, TrouserListStyle, VestListStyle, BatikListStyle } from './sidebar/dataSidebar';\nvar initStyle = {\n  \"bottom\": {\n    \"image\": \"\",\n    \"name\": \"Square\"\n  },\n  \"collar\": {\n    \"image\": \"\",\n    \"name\": \"Stand Up\"\n  },\n  \"collarBack\": {\n    \"image\": \"/img/pleats/red/Collar Back.svg\",\n    \"name\": \"Stand Up\"\n  },\n  \"sleeve\": {\n    \"image\": \"\",\n    \"name\": \"Short\"\n  },\n  \"cuffs\": {\n    \"image\": \"\",\n    \"name\": \"Square French\"\n  },\n  \"cuffsBack\": {\n    \"image\": \"/img/sleeve_back/Cuffs Double Rounded French Back.svg\",\n    \"name\": \"Square French\"\n  },\n  \"pocket\": {\n    \"image\": \"\",\n    \"name\": \"With Flap\"\n  },\n  \"placket\": {\n    \"image\": \"\",\n    \"name\": \"Standard Body Untucked With Square\"\n  },\n  \"pleats\": {\n    \"image\": \"/img/pleats/red/Pleats Box Tucked.svg\",\n    \"name\": \"Pleats\"\n  },\n  \"collarFold\": {\n    \"image\": \"\"\n  },\n  \"cuffsFold\": {\n    \"image\": \"\"\n  },\n  \"pocketFold\": {\n    \"image\": \"\" // \"image\":\"/img/pleats/red/Chest Pocket Folded.svg\"\n\n  },\n  \"placketFold\": {\n    \"image\": \"/img/folded/red/pleats/Placket Standard Body Folded.svg\"\n  }\n};\n\nvar useHookCustom = function useHookCustom() {\n  _s();\n\n  var initialPov = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'FRONT';\n\n  var _useState = useState([]),\n      fabricList = _useState[0],\n      setFabricList = _useState[1];\n\n  var _useState2 = useState({\n    collar: {\n      name: '',\n      image: ''\n    },\n    sleeve: {\n      name: '',\n      image: ''\n    },\n    pocket: {\n      name: '',\n      image: ''\n    },\n    placket: {\n      name: '',\n      image: ''\n    },\n    cuffs: {\n      name: '',\n      image: ''\n    },\n    bottom: {\n      name: '',\n      image: ''\n    }\n  }),\n      dataStyle = _useState2[0],\n      setDataStyle = _useState2[1];\n\n  var _useState3 = useState(false),\n      isLoading = _useState3[0],\n      setIsLoading = _useState3[1];\n\n  var _useState4 = useState(false),\n      isLoadingFabric = _useState4[0],\n      setIsLoadingFabric = _useState4[1];\n\n  var _useState5 = useState(initialPov),\n      pov = _useState5[0],\n      setPov = _useState5[1];\n\n  var fabricSelectRef = useRef(null);\n  var updatePov = useCallback(function (newPov) {\n    console.log('Updating POV to:', newPov);\n    setPov(newPov);\n  }, []);\n  var setFabricSelect = useCallback(function (fabric) {\n    console.log('Setting fabricSelect:', fabric);\n    fabricSelectRef.current = fabric;\n  }, []);\n  var getCustomStyle = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var url, params, response, _response$data, status, data;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(\"Getting custom style for POV:\", pov);\n            console.log(\"Current fabricSelect:\", fabricSelectRef.current);\n            setIsLoading(true);\n            setIsLoadingFabric(true);\n            _context.prev = 4;\n\n            if (!(!fabricSelectRef.current || !fabricSelectRef.current._id)) {\n              _context.next = 8;\n              break;\n            }\n\n            console.error(\"No fabric selected or fabric ID is missing\");\n            return _context.abrupt(\"return\");\n\n          case 8:\n            url = new URL('/api/custom/custom_style', window.location.origin);\n            params = new URLSearchParams({\n              fabric: fabricSelectRef.current._id,\n              collar: dataStyle.collar.name,\n              cuffs: dataStyle.cuffs.name,\n              sleeve: dataStyle.sleeve.name,\n              bottom: dataStyle.bottom.name,\n              chestpocket: dataStyle.pocket.name,\n              placket: dataStyle.placket.name,\n              pov: pov\n            });\n            url.search = params.toString();\n            console.log(\"Request URL:\", url.toString());\n            _context.next = 14;\n            return axios.get(url.toString());\n\n          case 14:\n            response = _context.sent;\n            console.log(\"API Response:\", response.data);\n            _response$data = response.data, status = _response$data.status, data = _response$data.data;\n\n            if (status) {\n              setDataStyle(function (prevState) {\n                var _data$styles$collar, _data$styles$collar2, _data$styles$sleeve, _data$styles$sleeve2, _data$styles$chestpoc, _data$styles$chestpoc2, _data$styles$placket, _data$styles$placket2, _data$styles$cuffs, _data$styles$cuffs2, _data$styles$bottom, _data$styles$bottom2;\n\n                return _objectSpread(_objectSpread({}, prevState), {}, {\n                  collar: {\n                    name: ((_data$styles$collar = data.styles.collar) === null || _data$styles$collar === void 0 ? void 0 : _data$styles$collar.name) || prevState.collar.name,\n                    image: ((_data$styles$collar2 = data.styles.collar) === null || _data$styles$collar2 === void 0 ? void 0 : _data$styles$collar2.image) || prevState.collar.image\n                  },\n                  sleeve: {\n                    name: ((_data$styles$sleeve = data.styles.sleeve) === null || _data$styles$sleeve === void 0 ? void 0 : _data$styles$sleeve.name) || prevState.sleeve.name,\n                    image: ((_data$styles$sleeve2 = data.styles.sleeve) === null || _data$styles$sleeve2 === void 0 ? void 0 : _data$styles$sleeve2.image) || prevState.sleeve.image\n                  },\n                  pocket: {\n                    name: ((_data$styles$chestpoc = data.styles.chestpocket) === null || _data$styles$chestpoc === void 0 ? void 0 : _data$styles$chestpoc.name) || prevState.pocket.name,\n                    image: ((_data$styles$chestpoc2 = data.styles.chestpocket) === null || _data$styles$chestpoc2 === void 0 ? void 0 : _data$styles$chestpoc2.image) || prevState.pocket.image\n                  },\n                  placket: {\n                    name: ((_data$styles$placket = data.styles.placket) === null || _data$styles$placket === void 0 ? void 0 : _data$styles$placket.name) || prevState.placket.name,\n                    image: ((_data$styles$placket2 = data.styles.placket) === null || _data$styles$placket2 === void 0 ? void 0 : _data$styles$placket2.image) || prevState.placket.image\n                  },\n                  cuffs: {\n                    name: ((_data$styles$cuffs = data.styles.cuffs) === null || _data$styles$cuffs === void 0 ? void 0 : _data$styles$cuffs.name) || prevState.cuffs.name,\n                    image: ((_data$styles$cuffs2 = data.styles.cuffs) === null || _data$styles$cuffs2 === void 0 ? void 0 : _data$styles$cuffs2.image) || prevState.cuffs.image\n                  },\n                  bottom: {\n                    name: ((_data$styles$bottom = data.styles.bottom) === null || _data$styles$bottom === void 0 ? void 0 : _data$styles$bottom.name) || prevState.bottom.name,\n                    image: ((_data$styles$bottom2 = data.styles.bottom) === null || _data$styles$bottom2 === void 0 ? void 0 : _data$styles$bottom2.image) || prevState.bottom.image\n                  }\n                });\n              });\n            } else {\n              console.error(\"API returned error status\");\n            }\n\n            _context.next = 23;\n            break;\n\n          case 20:\n            _context.prev = 20;\n            _context.t0 = _context[\"catch\"](4);\n            console.error(\"Error in getCustomStyle:\", _context.t0);\n\n          case 23:\n            _context.prev = 23;\n            setIsLoading(false);\n            setIsLoadingFabric(false);\n            return _context.finish(23);\n\n          case 27:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[4, 20, 23, 27]]);\n  })), [pov, dataStyle]);\n  useEffect(function () {\n    console.log('POV changed in useHookCustom:', pov);\n    console.log('Current fabricSelect when POV changed:', fabricSelectRef.current);\n\n    if (fabricSelectRef.current && fabricSelectRef.current._id && pov) {\n      getCustomStyle();\n    }\n  }, [pov, getCustomStyle]);\n  return {\n    fabricList: fabricList,\n    setFabricList: setFabricList,\n    fabricSelect: fabricSelectRef.current,\n    setFabricSelect: setFabricSelect,\n    dataStyle: dataStyle,\n    setDataStyle: setDataStyle,\n    isLoading: isLoading,\n    isLoadingFabric: isLoadingFabric,\n    pov: pov,\n    updatePov: updatePov,\n    getCustomStyle: getCustomStyle\n  };\n};\n\n_s(useHookCustom, \"11cXBgkUBSIBKA5MK5+LA0cM7sk=\");\n\nexport default useHookCustom;","map":{"version":3,"sources":["D:/luarKampus/Magang/Bestada/laxmi.front.web.user/components/partials/custom/hookCustom.js"],"names":["axios","useRouter","useCallback","useEffect","useState","BlazerListStyle","ShirtListStyle","TrouserListStyle","VestListStyle","BatikListStyle","initStyle","useHookCustom","initialPov","fabricList","setFabricList","collar","name","image","sleeve","pocket","placket","cuffs","bottom","dataStyle","setDataStyle","isLoading","setIsLoading","isLoadingFabric","setIsLoadingFabric","pov","setPov","fabricSelectRef","useRef","updatePov","newPov","console","log","setFabricSelect","fabric","current","getCustomStyle","_id","error","url","URL","window","location","origin","params","URLSearchParams","chestpocket","search","toString","get","response","data","status","prevState","styles","fabricSelect"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\n// import frenchPlacket from \"../../../public/img/placket/Placket French.svg\";\r\n\r\nimport { useRouter } from \"next/router\";\r\nimport { useCallback, useEffect, useState } from \"react\"\r\nimport {\r\n    BlazerListStyle,\r\n    ShirtListStyle,\r\n    TrouserListStyle,\r\n    VestListStyle,\r\n    BatikListStyle\r\n} from './sidebar/dataSidebar'\r\n\r\n\r\nconst initStyle = {\r\n    \"bottom\": {\r\n        \"image\": \"\",\r\n        \"name\": \"Square\"\r\n    },\r\n    \"collar\": {\r\n        \"image\": \"\",\r\n        \"name\": \"Stand Up\"\r\n    },\r\n    \"collarBack\": {\r\n        \"image\": \"/img/pleats/red/Collar Back.svg\",\r\n        \"name\": \"Stand Up\"\r\n    },\r\n    \"sleeve\": {\r\n        \"image\": \"\",\r\n        \"name\": \"Short\"\r\n    },\r\n    \"cuffs\": {\r\n        \"image\": \"\",\r\n        \"name\": \"Square French\"\r\n    },\r\n    \"cuffsBack\": {\r\n        \"image\": \"/img/sleeve_back/Cuffs Double Rounded French Back.svg\",\r\n        \"name\": \"Square French\"\r\n    },\r\n    \"pocket\": {\r\n        \"image\": \"\",\r\n        \"name\": \"With Flap\"\r\n    },\r\n    \"placket\": {\r\n        \"image\": \"\",\r\n        \"name\": \"Standard Body Untucked With Square\"\r\n    },\r\n    \"pleats\": {\r\n        \"image\": \"/img/pleats/red/Pleats Box Tucked.svg\",\r\n        \"name\": \"Pleats\"\r\n    },\r\n    \"collarFold\":{\r\n        \"image\":\"\"\r\n    },\r\n    \"cuffsFold\":{\r\n        \"image\":\"\"\r\n    },\r\n    \"pocketFold\":{\r\n        \"image\":\"\"\r\n        // \"image\":\"/img/pleats/red/Chest Pocket Folded.svg\"\r\n    },\r\n    \"placketFold\":{\r\n        \"image\":\"/img/folded/red/pleats/Placket Standard Body Folded.svg\"\r\n    }\r\n}\r\n\r\nconst useHookCustom = (initialPov = 'FRONT') => {\r\n  const [fabricList, setFabricList] = useState([]);\r\n  const [dataStyle, setDataStyle] = useState({\r\n    collar: { name: '', image: '' },\r\n    sleeve: { name: '', image: '' },\r\n    pocket: { name: '', image: '' },\r\n    placket: { name: '', image: '' },\r\n    cuffs: { name: '', image: '' },\r\n    bottom: { name: '', image: '' },\r\n  });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isLoadingFabric, setIsLoadingFabric] = useState(false);\r\n  const [pov, setPov] = useState(initialPov);\r\n  \r\n  const fabricSelectRef = useRef(null);\r\n\r\n  const updatePov = useCallback((newPov) => {\r\n    console.log('Updating POV to:', newPov);\r\n    setPov(newPov);\r\n  }, []);\r\n\r\n  const setFabricSelect = useCallback((fabric) => {\r\n    console.log('Setting fabricSelect:', fabric);\r\n    fabricSelectRef.current = fabric;\r\n  }, []);\r\n\r\n  const getCustomStyle = useCallback(async () => {\r\n    console.log(\"Getting custom style for POV:\", pov);\r\n    console.log(\"Current fabricSelect:\", fabricSelectRef.current);\r\n    \r\n    setIsLoading(true);\r\n    setIsLoadingFabric(true);\r\n\r\n    try {\r\n      if (!fabricSelectRef.current || !fabricSelectRef.current._id) {\r\n        console.error(\"No fabric selected or fabric ID is missing\");\r\n        return;\r\n      }\r\n\r\n      let url = new URL('/api/custom/custom_style', window.location.origin);\r\n      let params = new URLSearchParams({\r\n        fabric: fabricSelectRef.current._id,\r\n        collar: dataStyle.collar.name,\r\n        cuffs: dataStyle.cuffs.name,\r\n        sleeve: dataStyle.sleeve.name,\r\n        bottom: dataStyle.bottom.name,\r\n        chestpocket: dataStyle.pocket.name,\r\n        placket: dataStyle.placket.name,\r\n        pov: pov\r\n      });\r\n\r\n      url.search = params.toString();\r\n\r\n      console.log(\"Request URL:\", url.toString());\r\n\r\n      const response = await axios.get(url.toString());\r\n      console.log(\"API Response:\", response.data);\r\n\r\n      const { status, data } = response.data;\r\n      if (status) {\r\n        setDataStyle(prevState => ({\r\n          ...prevState,\r\n          collar: { \r\n            name: data.styles.collar?.name || prevState.collar.name, \r\n            image: data.styles.collar?.image || prevState.collar.image \r\n          },\r\n          sleeve: { \r\n            name: data.styles.sleeve?.name || prevState.sleeve.name, \r\n            image: data.styles.sleeve?.image || prevState.sleeve.image \r\n          },\r\n          pocket: { \r\n            name: data.styles.chestpocket?.name || prevState.pocket.name, \r\n            image: data.styles.chestpocket?.image || prevState.pocket.image \r\n          },\r\n          placket: { \r\n            name: data.styles.placket?.name || prevState.placket.name, \r\n            image: data.styles.placket?.image || prevState.placket.image \r\n          },\r\n          cuffs: { \r\n            name: data.styles.cuffs?.name || prevState.cuffs.name, \r\n            image: data.styles.cuffs?.image || prevState.cuffs.image \r\n          },\r\n          bottom: { \r\n            name: data.styles.bottom?.name || prevState.bottom.name, \r\n            image: data.styles.bottom?.image || prevState.bottom.image \r\n          },\r\n        }));\r\n      } else {\r\n        console.error(\"API returned error status\");\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Error in getCustomStyle:\", e);\r\n    } finally {\r\n      setIsLoading(false);\r\n      setIsLoadingFabric(false);\r\n    }\r\n  }, [pov, dataStyle]);\r\n\r\n  useEffect(() => {\r\n    console.log('POV changed in useHookCustom:', pov);\r\n    console.log('Current fabricSelect when POV changed:', fabricSelectRef.current);\r\n    if (fabricSelectRef.current && fabricSelectRef.current._id && pov) {\r\n      getCustomStyle();\r\n    }\r\n  }, [pov, getCustomStyle]);\r\n\r\n  return {\r\n    fabricList,\r\n    setFabricList,\r\n    fabricSelect: fabricSelectRef.current,\r\n    setFabricSelect,\r\n    dataStyle,\r\n    setDataStyle,\r\n    isLoading,\r\n    isLoadingFabric,\r\n    pov,\r\n    updatePov,\r\n    getCustomStyle\r\n  };\r\n};\r\n\r\nexport default useHookCustom;"]},"metadata":{},"sourceType":"module"}
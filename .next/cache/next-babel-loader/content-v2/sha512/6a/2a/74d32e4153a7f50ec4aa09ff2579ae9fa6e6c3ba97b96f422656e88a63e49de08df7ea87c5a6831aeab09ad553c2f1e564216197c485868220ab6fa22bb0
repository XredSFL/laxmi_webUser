{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport axios from \"axios\"; // import frenchPlacket from \"../../../public/img/placket/Placket French.svg\";\n\nimport { useRouter } from \"next/router\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { BlazerListStyle, ShirtListStyle, TrouserListStyle, VestListStyle, BatikListStyle } from './sidebar/dataSidebar';\nconst initStyle = {\n  \"bottom\": {\n    \"image\": \"\",\n    \"name\": \"Square\"\n  },\n  \"collar\": {\n    \"image\": \"\",\n    \"name\": \"Stand Up\"\n  },\n  \"collarBack\": {\n    \"image\": \"/img/pleats/red/Collar Back.svg\",\n    \"name\": \"Stand Up\"\n  },\n  \"sleeve\": {\n    \"image\": \"\",\n    \"name\": \"Short\"\n  },\n  \"cuffs\": {\n    \"image\": \"\",\n    \"name\": \"Square French\"\n  },\n  \"cuffsBack\": {\n    \"image\": \"/img/sleeve_back/Cuffs Double Rounded French Back.svg\",\n    \"name\": \"Square French\"\n  },\n  \"pocket\": {\n    \"image\": \"\",\n    \"name\": \"With Flap\"\n  },\n  \"placket\": {\n    \"image\": \"\",\n    \"name\": \"Standard Body Untucked With Square\"\n  },\n  \"pleats\": {\n    \"image\": \"/img/pleats/red/Pleats Box Tucked.svg\",\n    \"name\": \"Pleats\"\n  },\n  \"collarFold\": {\n    \"image\": \"\"\n  },\n  \"cuffsFold\": {\n    \"image\": \"\"\n  },\n  \"pocketFold\": {\n    \"image\": \"\" // \"image\":\"/img/pleats/red/Chest Pocket Folded.svg\"\n\n  },\n  \"placketFold\": {\n    \"image\": \"/img/folded/red/pleats/Placket Standard Body Folded.svg\"\n  }\n};\n\nconst useHookCustom = (initialPov = 'FRONT') => {\n  const {\n    0: fabricList,\n    1: setFabricList\n  } = useState([]);\n  const {\n    0: dataStyle,\n    1: setDataStyle\n  } = useState({\n    collar: {\n      name: '',\n      image: ''\n    },\n    sleeve: {\n      name: '',\n      image: ''\n    },\n    pocket: {\n      name: '',\n      image: ''\n    },\n    placket: {\n      name: '',\n      image: ''\n    },\n    cuffs: {\n      name: '',\n      image: ''\n    },\n    bottom: {\n      name: '',\n      image: ''\n    }\n  });\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: isLoadingFabric,\n    1: setIsLoadingFabric\n  } = useState(false);\n  const {\n    0: pov,\n    1: setPov\n  } = useState(initialPov);\n  const fabricSelectRef = useRef(null);\n  const updatePov = useCallback(newPov => {\n    console.log('Updating POV to:', newPov);\n    setPov(newPov);\n  }, []);\n  const setFabricSelect = useCallback(fabric => {\n    console.log('Setting fabricSelect:', fabric);\n    fabricSelectRef.current = fabric;\n  }, []);\n  const getCustomStyle = useCallback(async () => {\n    console.log(\"Getting custom style for POV:\", pov);\n    console.log(\"Current fabricSelect:\", fabricSelectRef.current);\n    setIsLoading(true);\n    setIsLoadingFabric(true);\n\n    try {\n      if (!fabricSelectRef.current || !fabricSelectRef.current._id) {\n        console.error(\"No fabric selected or fabric ID is missing\");\n        return;\n      }\n\n      let url = new URL('/api/custom/custom_style', window.location.origin);\n      let params = new URLSearchParams({\n        fabric: fabricSelectRef.current._id,\n        collar: dataStyle.collar.name,\n        cuffs: dataStyle.cuffs.name,\n        sleeve: dataStyle.sleeve.name,\n        bottom: dataStyle.bottom.name,\n        chestpocket: dataStyle.pocket.name,\n        placket: dataStyle.placket.name,\n        pov: pov\n      });\n      url.search = params.toString();\n      console.log(\"Request URL:\", url.toString());\n      const response = await axios.get(url.toString());\n      console.log(\"API Response:\", response.data);\n      const {\n        status,\n        data\n      } = response.data;\n\n      if (status) {\n        setDataStyle(prevState => {\n          var _data$styles$collar, _data$styles$collar2, _data$styles$sleeve, _data$styles$sleeve2, _data$styles$chestpoc, _data$styles$chestpoc2, _data$styles$placket, _data$styles$placket2, _data$styles$cuffs, _data$styles$cuffs2, _data$styles$bottom, _data$styles$bottom2;\n\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            collar: {\n              name: ((_data$styles$collar = data.styles.collar) === null || _data$styles$collar === void 0 ? void 0 : _data$styles$collar.name) || prevState.collar.name,\n              image: ((_data$styles$collar2 = data.styles.collar) === null || _data$styles$collar2 === void 0 ? void 0 : _data$styles$collar2.image) || prevState.collar.image\n            },\n            sleeve: {\n              name: ((_data$styles$sleeve = data.styles.sleeve) === null || _data$styles$sleeve === void 0 ? void 0 : _data$styles$sleeve.name) || prevState.sleeve.name,\n              image: ((_data$styles$sleeve2 = data.styles.sleeve) === null || _data$styles$sleeve2 === void 0 ? void 0 : _data$styles$sleeve2.image) || prevState.sleeve.image\n            },\n            pocket: {\n              name: ((_data$styles$chestpoc = data.styles.chestpocket) === null || _data$styles$chestpoc === void 0 ? void 0 : _data$styles$chestpoc.name) || prevState.pocket.name,\n              image: ((_data$styles$chestpoc2 = data.styles.chestpocket) === null || _data$styles$chestpoc2 === void 0 ? void 0 : _data$styles$chestpoc2.image) || prevState.pocket.image\n            },\n            placket: {\n              name: ((_data$styles$placket = data.styles.placket) === null || _data$styles$placket === void 0 ? void 0 : _data$styles$placket.name) || prevState.placket.name,\n              image: ((_data$styles$placket2 = data.styles.placket) === null || _data$styles$placket2 === void 0 ? void 0 : _data$styles$placket2.image) || prevState.placket.image\n            },\n            cuffs: {\n              name: ((_data$styles$cuffs = data.styles.cuffs) === null || _data$styles$cuffs === void 0 ? void 0 : _data$styles$cuffs.name) || prevState.cuffs.name,\n              image: ((_data$styles$cuffs2 = data.styles.cuffs) === null || _data$styles$cuffs2 === void 0 ? void 0 : _data$styles$cuffs2.image) || prevState.cuffs.image\n            },\n            bottom: {\n              name: ((_data$styles$bottom = data.styles.bottom) === null || _data$styles$bottom === void 0 ? void 0 : _data$styles$bottom.name) || prevState.bottom.name,\n              image: ((_data$styles$bottom2 = data.styles.bottom) === null || _data$styles$bottom2 === void 0 ? void 0 : _data$styles$bottom2.image) || prevState.bottom.image\n            }\n          });\n        });\n      } else {\n        console.error(\"API returned error status\");\n      }\n    } catch (e) {\n      console.error(\"Error in getCustomStyle:\", e);\n    } finally {\n      setIsLoading(false);\n      setIsLoadingFabric(false);\n    }\n  }, [pov, dataStyle]);\n  useEffect(() => {\n    console.log('POV changed in useHookCustom:', pov);\n    console.log('Current fabricSelect when POV changed:', fabricSelectRef.current);\n\n    if (fabricSelectRef.current && fabricSelectRef.current._id && pov) {\n      getCustomStyle();\n    }\n  }, [pov, getCustomStyle]);\n  return {\n    fabricList,\n    setFabricList,\n    fabricSelect: fabricSelectRef.current,\n    setFabricSelect,\n    dataStyle,\n    setDataStyle,\n    isLoading,\n    isLoadingFabric,\n    pov,\n    updatePov,\n    getCustomStyle\n  };\n};\n\nexport default useHookCustom;","map":{"version":3,"sources":["D:/luarKampus/Magang/Bestada/laxmi.front.web.user/components/partials/custom/hookCustom.js"],"names":["axios","useRouter","useCallback","useEffect","useState","BlazerListStyle","ShirtListStyle","TrouserListStyle","VestListStyle","BatikListStyle","initStyle","useHookCustom","initialPov","fabricList","setFabricList","dataStyle","setDataStyle","collar","name","image","sleeve","pocket","placket","cuffs","bottom","isLoading","setIsLoading","isLoadingFabric","setIsLoadingFabric","pov","setPov","fabricSelectRef","useRef","updatePov","newPov","console","log","setFabricSelect","fabric","current","getCustomStyle","_id","error","url","URL","window","location","origin","params","URLSearchParams","chestpocket","search","toString","response","get","data","status","prevState","styles","e","fabricSelect"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\n// import frenchPlacket from \"../../../public/img/placket/Placket French.svg\";\r\n\r\nimport { useRouter } from \"next/router\";\r\nimport { useCallback, useEffect, useState } from \"react\"\r\nimport {\r\n    BlazerListStyle,\r\n    ShirtListStyle,\r\n    TrouserListStyle,\r\n    VestListStyle,\r\n    BatikListStyle\r\n} from './sidebar/dataSidebar'\r\n\r\n\r\nconst initStyle = {\r\n    \"bottom\": {\r\n        \"image\": \"\",\r\n        \"name\": \"Square\"\r\n    },\r\n    \"collar\": {\r\n        \"image\": \"\",\r\n        \"name\": \"Stand Up\"\r\n    },\r\n    \"collarBack\": {\r\n        \"image\": \"/img/pleats/red/Collar Back.svg\",\r\n        \"name\": \"Stand Up\"\r\n    },\r\n    \"sleeve\": {\r\n        \"image\": \"\",\r\n        \"name\": \"Short\"\r\n    },\r\n    \"cuffs\": {\r\n        \"image\": \"\",\r\n        \"name\": \"Square French\"\r\n    },\r\n    \"cuffsBack\": {\r\n        \"image\": \"/img/sleeve_back/Cuffs Double Rounded French Back.svg\",\r\n        \"name\": \"Square French\"\r\n    },\r\n    \"pocket\": {\r\n        \"image\": \"\",\r\n        \"name\": \"With Flap\"\r\n    },\r\n    \"placket\": {\r\n        \"image\": \"\",\r\n        \"name\": \"Standard Body Untucked With Square\"\r\n    },\r\n    \"pleats\": {\r\n        \"image\": \"/img/pleats/red/Pleats Box Tucked.svg\",\r\n        \"name\": \"Pleats\"\r\n    },\r\n    \"collarFold\":{\r\n        \"image\":\"\"\r\n    },\r\n    \"cuffsFold\":{\r\n        \"image\":\"\"\r\n    },\r\n    \"pocketFold\":{\r\n        \"image\":\"\"\r\n        // \"image\":\"/img/pleats/red/Chest Pocket Folded.svg\"\r\n    },\r\n    \"placketFold\":{\r\n        \"image\":\"/img/folded/red/pleats/Placket Standard Body Folded.svg\"\r\n    }\r\n}\r\n\r\nconst useHookCustom = (initialPov = 'FRONT') => {\r\n  const [fabricList, setFabricList] = useState([]);\r\n  const [dataStyle, setDataStyle] = useState({\r\n    collar: { name: '', image: '' },\r\n    sleeve: { name: '', image: '' },\r\n    pocket: { name: '', image: '' },\r\n    placket: { name: '', image: '' },\r\n    cuffs: { name: '', image: '' },\r\n    bottom: { name: '', image: '' },\r\n  });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isLoadingFabric, setIsLoadingFabric] = useState(false);\r\n  const [pov, setPov] = useState(initialPov);\r\n  \r\n  const fabricSelectRef = useRef(null);\r\n\r\n  const updatePov = useCallback((newPov) => {\r\n    console.log('Updating POV to:', newPov);\r\n    setPov(newPov);\r\n  }, []);\r\n\r\n  const setFabricSelect = useCallback((fabric) => {\r\n    console.log('Setting fabricSelect:', fabric);\r\n    fabricSelectRef.current = fabric;\r\n  }, []);\r\n\r\n  const getCustomStyle = useCallback(async () => {\r\n    console.log(\"Getting custom style for POV:\", pov);\r\n    console.log(\"Current fabricSelect:\", fabricSelectRef.current);\r\n    \r\n    setIsLoading(true);\r\n    setIsLoadingFabric(true);\r\n\r\n    try {\r\n      if (!fabricSelectRef.current || !fabricSelectRef.current._id) {\r\n        console.error(\"No fabric selected or fabric ID is missing\");\r\n        return;\r\n      }\r\n\r\n      let url = new URL('/api/custom/custom_style', window.location.origin);\r\n      let params = new URLSearchParams({\r\n        fabric: fabricSelectRef.current._id,\r\n        collar: dataStyle.collar.name,\r\n        cuffs: dataStyle.cuffs.name,\r\n        sleeve: dataStyle.sleeve.name,\r\n        bottom: dataStyle.bottom.name,\r\n        chestpocket: dataStyle.pocket.name,\r\n        placket: dataStyle.placket.name,\r\n        pov: pov\r\n      });\r\n\r\n      url.search = params.toString();\r\n\r\n      console.log(\"Request URL:\", url.toString());\r\n\r\n      const response = await axios.get(url.toString());\r\n      console.log(\"API Response:\", response.data);\r\n\r\n      const { status, data } = response.data;\r\n      if (status) {\r\n        setDataStyle(prevState => ({\r\n          ...prevState,\r\n          collar: { \r\n            name: data.styles.collar?.name || prevState.collar.name, \r\n            image: data.styles.collar?.image || prevState.collar.image \r\n          },\r\n          sleeve: { \r\n            name: data.styles.sleeve?.name || prevState.sleeve.name, \r\n            image: data.styles.sleeve?.image || prevState.sleeve.image \r\n          },\r\n          pocket: { \r\n            name: data.styles.chestpocket?.name || prevState.pocket.name, \r\n            image: data.styles.chestpocket?.image || prevState.pocket.image \r\n          },\r\n          placket: { \r\n            name: data.styles.placket?.name || prevState.placket.name, \r\n            image: data.styles.placket?.image || prevState.placket.image \r\n          },\r\n          cuffs: { \r\n            name: data.styles.cuffs?.name || prevState.cuffs.name, \r\n            image: data.styles.cuffs?.image || prevState.cuffs.image \r\n          },\r\n          bottom: { \r\n            name: data.styles.bottom?.name || prevState.bottom.name, \r\n            image: data.styles.bottom?.image || prevState.bottom.image \r\n          },\r\n        }));\r\n      } else {\r\n        console.error(\"API returned error status\");\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Error in getCustomStyle:\", e);\r\n    } finally {\r\n      setIsLoading(false);\r\n      setIsLoadingFabric(false);\r\n    }\r\n  }, [pov, dataStyle]);\r\n\r\n  useEffect(() => {\r\n    console.log('POV changed in useHookCustom:', pov);\r\n    console.log('Current fabricSelect when POV changed:', fabricSelectRef.current);\r\n    if (fabricSelectRef.current && fabricSelectRef.current._id && pov) {\r\n      getCustomStyle();\r\n    }\r\n  }, [pov, getCustomStyle]);\r\n\r\n  return {\r\n    fabricList,\r\n    setFabricList,\r\n    fabricSelect: fabricSelectRef.current,\r\n    setFabricSelect,\r\n    dataStyle,\r\n    setDataStyle,\r\n    isLoading,\r\n    isLoadingFabric,\r\n    pov,\r\n    updatePov,\r\n    getCustomStyle\r\n  };\r\n};\r\n\r\nexport default useHookCustom;"]},"metadata":{},"sourceType":"module"}
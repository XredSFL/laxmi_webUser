{"ast":null,"code":"import _regeneratorRuntime from \"D:/luarKampus/Magang/Bestada/laxmi.front.web.user/node_modules/.pnpm/@babel+runtime@7.12.5/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"D:/luarKampus/Magang/Bestada/laxmi.front.web.user/node_modules/.pnpm/@babel+runtime@7.12.5/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"D:/luarKampus/Magang/Bestada/laxmi.front.web.user/node_modules/.pnpm/@babel+runtime@7.12.5/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from \"axios\";\nimport { useRouter } from \"next/router\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { BlazerListStyle, ShirtListStyle, TrouserListStyle, VestListStyle, BatikListStyle } from './sidebar/dataSidebar';\nvar initStyle = {\n  \"bottom\": {\n    \"image\": \"\",\n    \"name\": \"Square\"\n  },\n  \"collar\": {\n    \"image\": \"\",\n    \"name\": \"Stand Up\"\n  },\n  \"collarBack\": {\n    \"image\": \"/img/pleats/red/Collar Back.svg\",\n    \"name\": \"Stand Up\"\n  },\n  \"sleeve\": {\n    \"image\": \"\",\n    \"name\": \"Short\"\n  },\n  \"cuffs\": {\n    \"image\": \"\",\n    \"name\": \"Square French\"\n  },\n  \"cuffsBack\": {\n    \"image\": \"/img/sleeve_back/Cuffs Double Rounded French Back.svg\",\n    \"name\": \"Square French\"\n  },\n  \"pocket\": {\n    \"image\": \"\",\n    \"name\": \"With Flap\"\n  },\n  \"placket\": {\n    \"image\": \"\",\n    \"name\": \"Standard Body Untucked With Square\"\n  },\n  \"pleats\": {\n    \"image\": \"/img/pleats/red/Pleats Box Tucked.svg\",\n    \"name\": \"Pleats\"\n  },\n  \"collarFold\": {\n    \"image\": \"\"\n  },\n  \"cuffsFold\": {\n    \"image\": \"\"\n  },\n  \"pocketFold\": {\n    \"image\": \"\" // \"image\":\"/img/pleats/red/Chest Pocket Folded.svg\"\n\n  },\n  \"placketFold\": {\n    \"image\": \"/img/folded/red/pleats/Placket Standard Body Folded.svg\"\n  }\n};\n\nvar useHookCustom = function useHookCustom() {\n  _s();\n\n  var initialPov = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'FRONT';\n\n  var _useState = useState([]),\n      fabricList = _useState[0],\n      setFabricList = _useState[1];\n\n  var _useState2 = useState(initStyle),\n      dataStyle = _useState2[0],\n      setDataStyle = _useState2[1];\n\n  var _useState3 = useState(false),\n      isLoading = _useState3[0],\n      setIsLoading = _useState3[1];\n\n  var _useState4 = useState(false),\n      isLoadingFabric = _useState4[0],\n      setIsLoadingFabric = _useState4[1];\n\n  var _useState5 = useState(initialPov),\n      pov = _useState5[0],\n      setPov = _useState5[1];\n\n  var fabricSelectRef = useRef(null);\n  var updatePov = useCallback(function (newPov) {\n    console.log('Updating POV to:', newPov);\n    setPov(newPov);\n  }, []);\n  var setFabricSelect = useCallback(function (fabric) {\n    console.log('Setting fabricSelect:', fabric);\n    fabricSelectRef.current = fabric;\n  }, []);\n  var getCustomStyle = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var url, params, response, _response$data, status, data;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(\"Getting custom style for POV:\", pov);\n            console.log(\"Current fabricSelect:\", fabricSelectRef.current);\n            setIsLoading(true);\n            setIsLoadingFabric(true);\n            _context.prev = 4;\n\n            if (!(!fabricSelectRef.current || !fabricSelectRef.current._id)) {\n              _context.next = 8;\n              break;\n            }\n\n            console.error(\"No fabric selected or fabric ID is missing\");\n            return _context.abrupt(\"return\");\n\n          case 8:\n            url = new URL('/api/custom/custom_style', window.location.origin);\n            params = new URLSearchParams({\n              fabric: fabricSelectRef.current._id,\n              collar: dataStyle.collar.name,\n              cuffs: dataStyle.cuffs.name,\n              sleeve: dataStyle.sleeve.name,\n              bottom: dataStyle.bottom.name,\n              chestpocket: dataStyle.pocket.name,\n              placket: dataStyle.placket.name,\n              pov: pov\n            });\n            url.search = params.toString();\n            console.log(\"Request URL:\", url.toString());\n            _context.next = 14;\n            return axios.get(url.toString());\n\n          case 14:\n            response = _context.sent;\n            console.log(\"API Response:\", response.data);\n            _response$data = response.data, status = _response$data.status, data = _response$data.data;\n\n            if (status) {\n              setDataStyle(function (prevState) {\n                var _data$styles$collar, _data$styles$collar2, _data$styles$sleeve, _data$styles$sleeve2, _data$styles$chestpoc, _data$styles$chestpoc2, _data$styles$placket, _data$styles$placket2, _data$styles$cuffs, _data$styles$cuffs2, _data$styles$bottom, _data$styles$bottom2, _data$styles$collarBa, _data$styles$collarBa2, _data$styles$cuffsBac, _data$styles$cuffsBac2, _data$styles$pocketFo, _data$styles$pocketFo2, _data$styles$placketF, _data$styles$placketF2, _data$styles$collarFo, _data$styles$collarFo2, _data$styles$cuffsFol, _data$styles$cuffsFol2;\n\n                return _objectSpread(_objectSpread({}, prevState), {}, {\n                  collar: {\n                    name: ((_data$styles$collar = data.styles.collar) === null || _data$styles$collar === void 0 ? void 0 : _data$styles$collar.name) || prevState.collar.name,\n                    image: ((_data$styles$collar2 = data.styles.collar) === null || _data$styles$collar2 === void 0 ? void 0 : _data$styles$collar2.image) || prevState.collar.image\n                  },\n                  sleeve: {\n                    name: ((_data$styles$sleeve = data.styles.sleeve) === null || _data$styles$sleeve === void 0 ? void 0 : _data$styles$sleeve.name) || prevState.sleeve.name,\n                    image: ((_data$styles$sleeve2 = data.styles.sleeve) === null || _data$styles$sleeve2 === void 0 ? void 0 : _data$styles$sleeve2.image) || prevState.sleeve.image\n                  },\n                  pocket: {\n                    name: ((_data$styles$chestpoc = data.styles.chestpocket) === null || _data$styles$chestpoc === void 0 ? void 0 : _data$styles$chestpoc.name) || prevState.pocket.name,\n                    image: ((_data$styles$chestpoc2 = data.styles.chestpocket) === null || _data$styles$chestpoc2 === void 0 ? void 0 : _data$styles$chestpoc2.image) || prevState.pocket.image\n                  },\n                  placket: {\n                    name: ((_data$styles$placket = data.styles.placket) === null || _data$styles$placket === void 0 ? void 0 : _data$styles$placket.name) || prevState.placket.name,\n                    image: ((_data$styles$placket2 = data.styles.placket) === null || _data$styles$placket2 === void 0 ? void 0 : _data$styles$placket2.image) || prevState.placket.image\n                  },\n                  cuffs: {\n                    name: ((_data$styles$cuffs = data.styles.cuffs) === null || _data$styles$cuffs === void 0 ? void 0 : _data$styles$cuffs.name) || prevState.cuffs.name,\n                    image: ((_data$styles$cuffs2 = data.styles.cuffs) === null || _data$styles$cuffs2 === void 0 ? void 0 : _data$styles$cuffs2.image) || prevState.cuffs.image\n                  },\n                  bottom: {\n                    name: ((_data$styles$bottom = data.styles.bottom) === null || _data$styles$bottom === void 0 ? void 0 : _data$styles$bottom.name) || prevState.bottom.name,\n                    image: ((_data$styles$bottom2 = data.styles.bottom) === null || _data$styles$bottom2 === void 0 ? void 0 : _data$styles$bottom2.image) || prevState.bottom.image\n                  },\n                  collarBack: {\n                    name: ((_data$styles$collarBa = data.styles.collarBack) === null || _data$styles$collarBa === void 0 ? void 0 : _data$styles$collarBa.name) || prevState.collarBack.name,\n                    image: ((_data$styles$collarBa2 = data.styles.collarBack) === null || _data$styles$collarBa2 === void 0 ? void 0 : _data$styles$collarBa2.image) || prevState.collarBack.image\n                  },\n                  cuffsBack: {\n                    name: ((_data$styles$cuffsBac = data.styles.cuffsBack) === null || _data$styles$cuffsBac === void 0 ? void 0 : _data$styles$cuffsBac.name) || prevState.cuffsBack.name,\n                    image: ((_data$styles$cuffsBac2 = data.styles.cuffsBack) === null || _data$styles$cuffsBac2 === void 0 ? void 0 : _data$styles$cuffsBac2.image) || prevState.cuffsBack.image\n                  },\n                  pocketFold: {\n                    name: ((_data$styles$pocketFo = data.styles.pocketFold) === null || _data$styles$pocketFo === void 0 ? void 0 : _data$styles$pocketFo.name) || prevState.pocketFold.name,\n                    image: ((_data$styles$pocketFo2 = data.styles.pocketFold) === null || _data$styles$pocketFo2 === void 0 ? void 0 : _data$styles$pocketFo2.image) || prevState.pocketFold.image\n                  },\n                  placketFold: {\n                    name: ((_data$styles$placketF = data.styles.placketFold) === null || _data$styles$placketF === void 0 ? void 0 : _data$styles$placketF.name) || prevState.placketFold.name,\n                    image: ((_data$styles$placketF2 = data.styles.placketFold) === null || _data$styles$placketF2 === void 0 ? void 0 : _data$styles$placketF2.image) || prevState.placketFold.image\n                  },\n                  collarFold: {\n                    name: ((_data$styles$collarFo = data.styles.collarFold) === null || _data$styles$collarFo === void 0 ? void 0 : _data$styles$collarFo.name) || prevState.collarFold.name,\n                    image: ((_data$styles$collarFo2 = data.styles.collarFold) === null || _data$styles$collarFo2 === void 0 ? void 0 : _data$styles$collarFo2.image) || prevState.collarFold.image\n                  },\n                  cuffsFold: {\n                    name: ((_data$styles$cuffsFol = data.styles.cuffsFold) === null || _data$styles$cuffsFol === void 0 ? void 0 : _data$styles$cuffsFol.name) || prevState.cuffsFold.name,\n                    image: ((_data$styles$cuffsFol2 = data.styles.cuffsFold) === null || _data$styles$cuffsFol2 === void 0 ? void 0 : _data$styles$cuffsFol2.image) || prevState.cuffsFold.image\n                  }\n                });\n              });\n            } else {\n              console.error(\"API returned error status\");\n            }\n\n            _context.next = 23;\n            break;\n\n          case 20:\n            _context.prev = 20;\n            _context.t0 = _context[\"catch\"](4);\n            console.error(\"Error in getCustomStyle:\", _context.t0);\n\n          case 23:\n            _context.prev = 23;\n            setIsLoading(false);\n            setIsLoadingFabric(false);\n            return _context.finish(23);\n\n          case 27:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[4, 20, 23, 27]]);\n  })), [pov, dataStyle]);\n  useEffect(function () {\n    console.log('POV changed in useHookCustom:', pov);\n    console.log('Current fabricSelect when POV changed:', fabricSelectRef.current);\n\n    if (fabricSelectRef.current && fabricSelectRef.current._id && pov) {\n      getCustomStyle();\n    }\n  }, [pov, getCustomStyle]);\n  return {\n    fabricList: fabricList,\n    setFabricList: setFabricList,\n    fabricSelect: fabricSelectRef.current,\n    setFabricSelect: setFabricSelect,\n    dataStyle: dataStyle,\n    setDataStyle: setDataStyle,\n    isLoading: isLoading,\n    isLoadingFabric: isLoadingFabric,\n    pov: pov,\n    updatePov: updatePov,\n    getCustomStyle: getCustomStyle\n  };\n};\n\n_s(useHookCustom, \"zHcdhv/sPWQ35nXAZaRVjHhhnZQ=\");\n\nexport default useHookCustom;","map":{"version":3,"sources":["D:/luarKampus/Magang/Bestada/laxmi.front.web.user/components/partials/custom/hookCustom.js"],"names":["axios","useRouter","useCallback","useEffect","useState","BlazerListStyle","ShirtListStyle","TrouserListStyle","VestListStyle","BatikListStyle","initStyle","useHookCustom","initialPov","fabricList","setFabricList","dataStyle","setDataStyle","isLoading","setIsLoading","isLoadingFabric","setIsLoadingFabric","pov","setPov","fabricSelectRef","useRef","updatePov","newPov","console","log","setFabricSelect","fabric","current","getCustomStyle","_id","error","url","URL","window","location","origin","params","URLSearchParams","collar","name","cuffs","sleeve","bottom","chestpocket","pocket","placket","search","toString","get","response","data","status","prevState","styles","image","collarBack","cuffsBack","pocketFold","placketFold","collarFold","cuffsFold","fabricSelect"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport {\r\n  BlazerListStyle,\r\n  ShirtListStyle,\r\n  TrouserListStyle,\r\n  VestListStyle,\r\n  BatikListStyle\r\n} from './sidebar/dataSidebar';\r\n\r\nconst initStyle = {\r\n  \"bottom\": {\r\n    \"image\": \"\",\r\n    \"name\": \"Square\"\r\n  },\r\n  \"collar\": {\r\n    \"image\": \"\",\r\n    \"name\": \"Stand Up\"\r\n  },\r\n  \"collarBack\": {\r\n    \"image\": \"/img/pleats/red/Collar Back.svg\",\r\n    \"name\": \"Stand Up\"\r\n  },\r\n  \"sleeve\": {\r\n    \"image\": \"\",\r\n    \"name\": \"Short\"\r\n  },\r\n  \"cuffs\": {\r\n    \"image\": \"\",\r\n    \"name\": \"Square French\"\r\n  },\r\n  \"cuffsBack\": {\r\n    \"image\": \"/img/sleeve_back/Cuffs Double Rounded French Back.svg\",\r\n    \"name\": \"Square French\"\r\n  },\r\n  \"pocket\": {\r\n    \"image\": \"\",\r\n    \"name\": \"With Flap\"\r\n  },\r\n  \"placket\": {\r\n    \"image\": \"\",\r\n    \"name\": \"Standard Body Untucked With Square\"\r\n  },\r\n  \"pleats\": {\r\n    \"image\": \"/img/pleats/red/Pleats Box Tucked.svg\",\r\n    \"name\": \"Pleats\"\r\n  },\r\n  \"collarFold\": {\r\n    \"image\": \"\"\r\n  },\r\n  \"cuffsFold\": {\r\n    \"image\": \"\"\r\n  },\r\n  \"pocketFold\": {\r\n    \"image\": \"\"\r\n    // \"image\":\"/img/pleats/red/Chest Pocket Folded.svg\"\r\n  },\r\n  \"placketFold\": {\r\n    \"image\": \"/img/folded/red/pleats/Placket Standard Body Folded.svg\"\r\n  }\r\n};\r\n\r\nconst useHookCustom = (initialPov = 'FRONT') => {\r\n  const [fabricList, setFabricList] = useState([]);\r\n  const [dataStyle, setDataStyle] = useState(initStyle);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isLoadingFabric, setIsLoadingFabric] = useState(false);\r\n  const [pov, setPov] = useState(initialPov);\r\n\r\n  const fabricSelectRef = useRef(null);\r\n\r\n  const updatePov = useCallback((newPov) => {\r\n    console.log('Updating POV to:', newPov);\r\n    setPov(newPov);\r\n  }, []);\r\n\r\n  const setFabricSelect = useCallback((fabric) => {\r\n    console.log('Setting fabricSelect:', fabric);\r\n    fabricSelectRef.current = fabric;\r\n  }, []);\r\n\r\n  const getCustomStyle = useCallback(async () => {\r\n    console.log(\"Getting custom style for POV:\", pov);\r\n    console.log(\"Current fabricSelect:\", fabricSelectRef.current);\r\n\r\n    setIsLoading(true);\r\n    setIsLoadingFabric(true);\r\n\r\n    try {\r\n      if (!fabricSelectRef.current || !fabricSelectRef.current._id) {\r\n        console.error(\"No fabric selected or fabric ID is missing\");\r\n        return;\r\n      }\r\n\r\n      let url = new URL('/api/custom/custom_style', window.location.origin);\r\n      let params = new URLSearchParams({\r\n        fabric: fabricSelectRef.current._id,\r\n        collar: dataStyle.collar.name,\r\n        cuffs: dataStyle.cuffs.name,\r\n        sleeve: dataStyle.sleeve.name,\r\n        bottom: dataStyle.bottom.name,\r\n        chestpocket: dataStyle.pocket.name,\r\n        placket: dataStyle.placket.name,\r\n        pov: pov\r\n      });\r\n\r\n      url.search = params.toString();\r\n\r\n      console.log(\"Request URL:\", url.toString());\r\n\r\n      const response = await axios.get(url.toString());\r\n      console.log(\"API Response:\", response.data);\r\n\r\n      const { status, data } = response.data;\r\n      if (status) {\r\n        setDataStyle(prevState => ({\r\n          ...prevState,\r\n          collar: {\r\n            name: data.styles.collar?.name || prevState.collar.name,\r\n            image: data.styles.collar?.image || prevState.collar.image\r\n          },\r\n          sleeve: {\r\n            name: data.styles.sleeve?.name || prevState.sleeve.name,\r\n            image: data.styles.sleeve?.image || prevState.sleeve.image\r\n          },\r\n          pocket: {\r\n            name: data.styles.chestpocket?.name || prevState.pocket.name,\r\n            image: data.styles.chestpocket?.image || prevState.pocket.image\r\n          },\r\n          placket: {\r\n            name: data.styles.placket?.name || prevState.placket.name,\r\n            image: data.styles.placket?.image || prevState.placket.image\r\n          },\r\n          cuffs: {\r\n            name: data.styles.cuffs?.name || prevState.cuffs.name,\r\n            image: data.styles.cuffs?.image || prevState.cuffs.image\r\n          },\r\n          bottom: {\r\n            name: data.styles.bottom?.name || prevState.bottom.name,\r\n            image: data.styles.bottom?.image || prevState.bottom.image\r\n          },\r\n          collarBack: {\r\n            name: data.styles.collarBack?.name || prevState.collarBack.name,\r\n            image: data.styles.collarBack?.image || prevState.collarBack.image\r\n          },\r\n          cuffsBack: {\r\n            name: data.styles.cuffsBack?.name || prevState.cuffsBack.name,\r\n            image: data.styles.cuffsBack?.image || prevState.cuffsBack.image\r\n          },\r\n          pocketFold: {\r\n            name: data.styles.pocketFold?.name || prevState.pocketFold.name,\r\n            image: data.styles.pocketFold?.image || prevState.pocketFold.image\r\n          },\r\n          placketFold: {\r\n            name: data.styles.placketFold?.name || prevState.placketFold.name,\r\n            image: data.styles.placketFold?.image || prevState.placketFold.image\r\n          },\r\n          collarFold: {\r\n            name: data.styles.collarFold?.name || prevState.collarFold.name,\r\n            image: data.styles.collarFold?.image || prevState.collarFold.image\r\n          },\r\n          cuffsFold: {\r\n            name: data.styles.cuffsFold?.name || prevState.cuffsFold.name,\r\n            image: data.styles.cuffsFold?.image || prevState.cuffsFold.image\r\n          },\r\n        }));\r\n      } else {\r\n        console.error(\"API returned error status\");\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Error in getCustomStyle:\", e);\r\n    } finally {\r\n      setIsLoading(false);\r\n      setIsLoadingFabric(false);\r\n    }\r\n  }, [pov, dataStyle]);\r\n\r\n  useEffect(() => {\r\n    console.log('POV changed in useHookCustom:', pov);\r\n    console.log('Current fabricSelect when POV changed:', fabricSelectRef.current);\r\n    if (fabricSelectRef.current && fabricSelectRef.current._id && pov) {\r\n      getCustomStyle();\r\n    }\r\n  }, [pov, getCustomStyle]);\r\n\r\n  return {\r\n    fabricList,\r\n    setFabricList,\r\n    fabricSelect: fabricSelectRef.current,\r\n    setFabricSelect,\r\n    dataStyle,\r\n    setDataStyle,\r\n    isLoading,\r\n    isLoadingFabric,\r\n    pov,\r\n    updatePov,\r\n    getCustomStyle\r\n  };\r\n};\r\n\r\nexport default useHookCustom;"]},"metadata":{},"sourceType":"module"}
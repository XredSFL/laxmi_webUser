{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/luarKampus/Magang/Bestada/laxmi.front.web.user/node_modules/.pnpm/@babel+runtime@7.12.5/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"D:\\\\luarKampus\\\\Magang\\\\Bestada\\\\laxmi.front.web.user\\\\components\\\\shared\\\\header\\\\modules\\\\Account.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Link from 'next/link';\nimport { withRouter, useRouter } from 'next/router';\nimport React, { useState, useEffect } from 'react';\nimport { AccountCircle } from '../../../elements/icon'; // data\n\nimport linkArray from '../../data/linkArray'; // redux\n\nimport { connect } from 'react-redux';\nimport { logout as _logout, loginAction as _loginAction, enterPage as _enterPage } from '../../../../stores'; // elements\n\nimport { Input } from '../../../elements/form';\n\nvar Account = function Account(_ref) {\n  _s();\n\n  var router = _ref.router,\n      setIsShowAccount = _ref.setIsShowAccount,\n      isShowAccount = _ref.isShowAccount,\n      form = _ref.form,\n      error = _ref.error,\n      setForm = _ref.setForm,\n      setError = _ref.setError,\n      t = _ref.t,\n      authData = _ref.authData,\n      loginAction = _ref.loginAction,\n      logout = _ref.logout,\n      enterPage = _ref.enterPage;\n  var pathName = router.pathname;\n  var UseRouter = useRouter();\n  useEffect(function () {\n    enterPage();\n    setError({});\n  }, [isShowAccount]);\n  useEffect(function () {\n    setError({\n      email: authData.error\n    });\n  }, [authData.error]);\n\n  var validateForm = function validateForm() {\n    var valid = true;\n\n    var newErrors = _objectSpread({}, error);\n\n    if (!form.email) {\n      newErrors.email = \"Email \".concat(t(\"common:cannot be empty\"));\n      valid = false;\n    } else if (!form.email.includes(\"@\")) {\n      newErrors.email = \"Email \".concat(t(\"common:is not valid\"));\n      valid = false;\n    } else {\n      newErrors.email = null;\n    }\n\n    if (!form.password) {\n      newErrors.password = \"Password \".concat(t(\"common:cannot be empty\"));\n      valid = false;\n    } else {\n      newErrors.password = null;\n    }\n\n    setError(newErrors);\n    return valid;\n  }; // handle\n\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n\n    if (validateForm()) {\n      loginAction(form, router); // setIsShowAccount(!isShowAccount)\n    } // if (form.email) {\n    //     if (form.password) {\n    //         loginAction(form, UseRouter)\n    //         // setError({})\n    //     } else {\n    //         setError({\n    //             password: `${t(\"common:Password\")} ${t(\"common:cannot be empty\")}`\n    //         })\n    //     }\n    // } else {\n    //     setError({\n    //         email: `Email ${t(\"common:cannot be empty\")}`\n    //     })\n    // }\n\n  };\n\n  var handleChange = function handleChange(e) {\n    var _e$target = e.target,\n        value = _e$target.value,\n        id = _e$target.id;\n    setForm(_objectSpread(_objectSpread({}, form), {}, _defineProperty({}, id, value)));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mx-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      type: \"button\",\n      id: \"dropdownMenuButton\",\n      \"aria-expanded\": \"false\",\n      onClick: function onClick() {\n        return setIsShowAccount(!isShowAccount);\n      },\n      children: /*#__PURE__*/_jsxDEV(AccountCircle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"dropdown-menu dropdown-container dropdown-account py-4 \".concat(isShowAccount ? 'show' : ''),\n      children: authData.isLogin ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: [t(\"hi\"), \", \", authData.data.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 33\n          }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [t(\"Access to your personal area\"), \" : \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 33\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 29\n        }, _this), linkArray.map(function (dataLink, index) {\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              href: dataLink.url,\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"d-flex justify-content-between dropdown-item \".concat(dataLink.url === pathName ? 'active' : ''),\n                children: [t(dataLink.title), index === 1 ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"notif pt-1\",\n                  children: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 57\n                }, _this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 45\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 41\n            }, _this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 37\n          }, _this);\n        }), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"dropdown-item\",\n            onClick: function onClick() {\n              logout();\n              setIsShowAccount(!isShowAccount);\n              setTimeout(function () {\n                window.location.reload();\n              }, 500);\n            },\n            children: t(\"Log Out\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 33\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 29\n        }, _this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"text-center\",\n          children: t(\"common:Access your account\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 29\n        }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"px-5 pt-3\",\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            id: \"email\",\n            type: \"text\",\n            error: error.email,\n            label: t(\"common:Email\"),\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 33\n          }, _this), /*#__PURE__*/_jsxDEV(Input, {\n            id: \"password\",\n            type: \"password\",\n            error: error.password,\n            label: t(\"common:Password\"),\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 33\n          }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: authData.isLoading,\n            type: \"submit\",\n            className: \"btn btn-primary w-100 py-3\",\n            children: authData.isLoading ? 'Loading' : t(\"common:Login\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 33\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 29\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center pt-3\",\n          onClick: function onClick() {\n            return setIsShowAccount(!isShowAccount);\n          },\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            href: \"/login/forgotpassword\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"link mb-0\",\n              children: [t(\"common:Forgot Password\"), \" ?\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 37\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 33\n          }, _this), /*#__PURE__*/_jsxDEV(Link, {\n            href: \"/login/register\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"link mb-0\",\n              children: t(\"common:Create Account\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 37\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 33\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 29\n        }, _this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(Account, \"GgSVcf9HLOLL462iT5llExF1d2A=\", false, function () {\n  return [useRouter];\n});\n\n_c = Account;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    authData: state.auth\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    logout: function logout() {\n      return dispatch(_logout());\n    },\n    loginAction: function loginAction(form, router) {\n      return dispatch(_loginAction(form, router));\n    },\n    enterPage: function enterPage() {\n      return dispatch(_enterPage());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Account));\n\nvar _c;\n\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"sources":["D:/luarKampus/Magang/Bestada/laxmi.front.web.user/components/shared/header/modules/Account.jsx"],"names":["Link","withRouter","useRouter","React","useState","useEffect","AccountCircle","linkArray","connect","logout","loginAction","enterPage","Input","Account","router","setIsShowAccount","isShowAccount","form","error","setForm","setError","t","authData","pathName","pathname","UseRouter","email","validateForm","valid","newErrors","includes","password","handleSubmit","e","preventDefault","handleChange","target","value","id","isLogin","data","name","map","dataLink","index","url","title","setTimeout","window","location","reload","isLoading","mapStateToProps","state","auth","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import Link from 'next/link'\r\nimport { withRouter, useRouter } from 'next/router'\r\nimport React, { useState, useEffect } from 'react';\r\nimport { AccountCircle } from '../../../elements/icon';\r\n\r\n// data\r\nimport linkArray from '../../data/linkArray';\r\n\r\n// redux\r\nimport { connect } from 'react-redux'\r\nimport { logout, loginAction, enterPage } from '../../../../stores';\r\n\r\n// elements\r\nimport { Input } from '../../../elements/form';\r\n\r\nconst Account = ({\r\n    router,\r\n    setIsShowAccount,\r\n    isShowAccount,\r\n    form,\r\n    error,\r\n    setForm,\r\n    setError,\r\n    t,\r\n    authData,\r\n    loginAction,\r\n    logout,\r\n    enterPage }) => {\r\n    const pathName = router.pathname\r\n    const UseRouter = useRouter()\r\n\r\n    useEffect(() => {\r\n        enterPage()\r\n        setError({})\r\n    }, [isShowAccount]);\r\n\r\n    useEffect(() => {\r\n        setError({\r\n            email: authData.error\r\n        })\r\n    }, [authData.error]);\r\n\r\n    const validateForm = () => {\r\n        let valid = true;\r\n        var newErrors = { ...error }\r\n\r\n        if (!form.email) {\r\n            newErrors.email = `Email ${t(\"common:cannot be empty\")}`;\r\n            valid = false;\r\n        } else if (!form.email.includes(\"@\")) {\r\n            newErrors.email = `Email ${t(\"common:is not valid\")}`;\r\n            valid = false;\r\n        } else {\r\n            newErrors.email = null\r\n        }\r\n        if (!form.password) {\r\n            newErrors.password = `Password ${t(\"common:cannot be empty\")}`;\r\n            valid = false;\r\n        } else {\r\n            newErrors.password = null\r\n        }\r\n        setError(newErrors);\r\n        return valid;\r\n    }\r\n\r\n    // handle\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n        if (validateForm()) {\r\n            loginAction(form, router)\r\n            // setIsShowAccount(!isShowAccount)\r\n        }\r\n        // if (form.email) {\r\n        //     if (form.password) {\r\n        //         loginAction(form, UseRouter)\r\n        //         // setError({})\r\n        //     } else {\r\n        //         setError({\r\n        //             password: `${t(\"common:Password\")} ${t(\"common:cannot be empty\")}`\r\n        //         })\r\n        //     }\r\n        // } else {\r\n        //     setError({\r\n        //         email: `Email ${t(\"common:cannot be empty\")}`\r\n        //     })\r\n        // }\r\n    }\r\n    const handleChange = e => {\r\n        const { value, id } = e.target\r\n\r\n        setForm({\r\n            ...form,\r\n            [id]: value\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"mx-2\">\r\n            <a type=\"button\" id=\"dropdownMenuButton\" aria-expanded=\"false\" onClick={() => setIsShowAccount(!isShowAccount)}>\r\n                <AccountCircle />\r\n            </a>\r\n            <ul className={`dropdown-menu dropdown-container dropdown-account py-4 ${isShowAccount ? 'show' : ''}`}>\r\n                {\r\n                    authData.isLogin ?\r\n                        <>\r\n                            <div className=\"text-center\">\r\n                                <h5>{t(\"hi\")}, {authData.data.name}</h5>\r\n                                <p>{t(\"Access to your personal area\")} : </p>\r\n                            </div>\r\n                            {\r\n                                linkArray.map((dataLink, index) => (\r\n                                    <li key={index}>\r\n                                        <Link href={dataLink.url}>\r\n                                            <a className={`d-flex justify-content-between dropdown-item ${dataLink.url === pathName ? 'active' : ''}`}>\r\n                                                {t(dataLink.title)}\r\n                                                {\r\n                                                    index === 1 ?\r\n                                                        <span className=\"notif pt-1\">1</span> : null\r\n                                                }\r\n                                            </a>\r\n                                        </Link>\r\n                                    </li>\r\n                                ))\r\n                            }\r\n                            <li>\r\n                                <a className=\"dropdown-item\" onClick={() => {\r\n                                    logout()\r\n                                    setIsShowAccount(!isShowAccount)\r\n                                    setTimeout(function () { window.location.reload() }, 500)\r\n                                }}>{t(\"Log Out\")}</a></li>\r\n                        </> :\r\n                        <>\r\n                            <h5 className=\"text-center\">{t(\"common:Access your account\")}</h5>\r\n                            <form className=\"px-5 pt-3\" onSubmit={handleSubmit}>\r\n                                <Input\r\n                                    id=\"email\"\r\n                                    type=\"text\"\r\n                                    error={error.email}\r\n                                    label={t(\"common:Email\")}\r\n                                    onChange={handleChange}\r\n                                />\r\n                                <Input\r\n                                    id=\"password\"\r\n                                    type=\"password\"\r\n                                    error={error.password}\r\n                                    label={t(\"common:Password\")}\r\n                                    onChange={handleChange}\r\n                                />\r\n                                <button\r\n                                    disabled={authData.isLoading}\r\n                                    type=\"submit\"\r\n                                    className=\"btn btn-primary w-100 py-3\">{authData.isLoading ? 'Loading' : t(\"common:Login\")}</button>\r\n                            </form>\r\n                            <div className=\"text-center pt-3\" onClick={() => setIsShowAccount(!isShowAccount)}>\r\n                                <Link href='/login/forgotpassword' >\r\n                                    <p className=\"link mb-0\">{t(\"common:Forgot Password\")} ?</p>\r\n                                </Link>\r\n                                <Link href='/login/register'>\r\n                                    <p className=\"link mb-0\">{t(\"common:Create Account\")}</p>\r\n                                </Link>\r\n                            </div>\r\n                        </>\r\n                }\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        authData: state.auth\r\n    }\r\n}\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        logout: () => dispatch(logout()),\r\n        loginAction: (form, router) => dispatch(loginAction(form, router)),\r\n        enterPage: () => dispatch(enterPage())\r\n    }\r\n}\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withRouter(Account))\r\n"]},"metadata":{},"sourceType":"module"}
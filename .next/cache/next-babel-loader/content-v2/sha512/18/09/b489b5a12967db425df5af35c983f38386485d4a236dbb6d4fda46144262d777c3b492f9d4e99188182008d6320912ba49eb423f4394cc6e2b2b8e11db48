{"ast":null,"code":"import _defineProperty from \"D:/luarKampus/Magang/Bestada/laxmi.front.web.user/node_modules/.pnpm/@babel+runtime@7.12.5/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"D:/luarKampus/Magang/Bestada/laxmi.front.web.user/node_modules/.pnpm/@babel+runtime@7.12.5/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/luarKampus/Magang/Bestada/laxmi.front.web.user/node_modules/.pnpm/@babel+runtime@7.12.5/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from \"axios\"; // import frenchPlacket from \"../../../public/img/placket/Placket French.svg\";\n\nimport { useRouter } from \"next/router\";\nimport { useCallback, useEffect, useState, useRef } from \"react\";\nimport { BlazerListStyle, ShirtListStyle, TrouserListStyle, VestListStyle, BatikListStyle } from './sidebar/dataSidebar';\nvar initStyle = {\n  \"bottom\": {\n    \"image\": \"\",\n    \"name\": \"Square\"\n  },\n  \"collar\": {\n    \"image\": \"\",\n    \"name\": \"Stand Up\"\n  },\n  \"collarBack\": {\n    \"image\": \"/img/pleats/red/Collar Back.svg\",\n    \"name\": \"Stand Up\"\n  },\n  \"sleeve\": {\n    \"image\": \"\",\n    \"name\": \"Short\"\n  },\n  \"cuffs\": {\n    \"image\": \"\",\n    \"name\": \"One Button Cut\"\n  },\n  \"cuffsBack\": {\n    \"image\": \"/img/sleeve_back/Cuffs Double Rounded French Back.svg\",\n    \"name\": \"Square French\"\n  },\n  \"pocket\": {\n    \"image\": \"\",\n    \"name\": \"With Flap\"\n  },\n  \"placket\": {\n    \"image\": \"\",\n    \"name\": \"Standard Body Untucked With Square\"\n  },\n  \"pleats\": {\n    \"image\": \"/img/pleats/red/Pleats Box Tucked.svg\",\n    \"name\": \"Pleats\"\n  },\n  \"collarFold\": {\n    \"image\": \"\"\n  },\n  \"cuffsFold\": {\n    \"image\": \"\"\n  },\n  \"pocketFold\": {\n    \"image\": \"\" // \"image\":\"/img/pleats/red/Chest Pocket Folded.svg\"\n\n  },\n  \"placketFold\": {\n    \"image\": \"/img/folded/red/pleats/Placket Standard Body Folded.svg\"\n  }\n};\n\nvar useHookCustom = function useHookCustom() {\n  var router = useRouter();\n\n  var _useState = useState([]),\n      fabricList = _useState[0],\n      setFabricList = _useState[1];\n\n  var _useState2 = useState(null),\n      fabricSelect = _useState2[0],\n      setFabricSelect = _useState2[1];\n\n  var _useState3 = useState([]),\n      listStyle = _useState3[0],\n      setListStyle = _useState3[1];\n\n  var _useState4 = useState(false),\n      openStyle = _useState4[0],\n      setOpenStyle = _useState4[1];\n\n  var _useState5 = useState(null),\n      styleSelect = _useState5[0],\n      setStyleSelect = _useState5[1];\n\n  var _useState6 = useState(initStyle),\n      dataStyle = _useState6[0],\n      setDataStyle = _useState6[1];\n\n  var _useState7 = useState(false),\n      isLoading = _useState7[0],\n      setIsLoading = _useState7[1];\n\n  var _useState8 = useState(false),\n      isLoadingFabric = _useState8[0],\n      setIsLoadingFabric = _useState8[1];\n\n  var category = router.query.category;\n\n  var _useState9 = useState(\"FRONT\"),\n      pov = _useState9[0],\n      setPov = _useState9[1];\n\n  var fabricSelectRef = useRef(null);\n  var fabric;\n  useEffect(function () {\n    if (fabricSelect) {\n      getCustomStyle();\n      fabricSelectRef.current = fabricSelect;\n    }\n  }, [fabricSelect]);\n  useEffect(function () {\n    setIsLoadingFabric(true);\n    console.log(\"ini new pov\", pov);\n\n    if (!fabricSelect && fabricSelectRef.current) {\n      setFabricSelect(fabricSelectRef.current);\n    } else {\n      getCustomStyle();\n    }\n  }, [pov]);\n\n  var updatePov = function updatePov(newPov, newFabric) {\n    setPov(newPov);\n    setFabricSelect(newFabric);\n  };\n\n  useEffect(function () {\n    getCustomStyle();\n  }, []);\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var response, _response$data, status, message, data;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return axios.get(\"/api/fabric/list\");\n\n          case 3:\n            response = _context.sent;\n            _response$data = response.data, status = _response$data.status, message = _response$data.message;\n\n            if (status) {\n              data = response.data.data;\n              setFabricList(data);\n            } else {\n              setFabricList([]);\n            }\n\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            setFabricList([]);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 8]]);\n  })), []);\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setIsLoadingFabric(true);\n            getCustomStyle();\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })), [fabricSelect]);\n  useEffect(function () {\n    console.log(\"DataStyle:\", dataStyle);\n  }, [dataStyle]);\n  useEffect(function () {\n    setIsLoading(true);\n    console.log(styleSelect);\n\n    var newDataStyle = _objectSpread({}, dataStyle);\n\n    switch (styleSelect === null || styleSelect === void 0 ? void 0 : styleSelect.title) {\n      case \"Collar\":\n        newDataStyle.collar.name = styleSelect.name;\n        break;\n\n      case \"Sleeve\":\n        newDataStyle.sleeve.name = styleSelect.name;\n        break;\n\n      case \"Bottom\":\n        newDataStyle.bottom.name = styleSelect.name;\n        break;\n\n      case \"Chest Pocket\":\n        newDataStyle.pocket.name = styleSelect.name;\n        break;\n\n      case \"Cuffs\":\n        newDataStyle.cuffs.name = styleSelect.name;\n        newDataStyle.cuffsBack.name = styleSelect.name;\n        newDataStyle.sleeve.name = \"Long\";\n        break;\n\n      case \"Placket\":\n        newDataStyle.placket.name = styleSelect.name;\n      // case \"Pleats\":\n      //     newDataStyle.pleats.name = styleSelect.name\n\n      default:\n        break;\n    }\n\n    getCustomStyle();\n  }, [styleSelect]);\n  useEffect(function () {\n    switch (category) {\n      case 'vests':\n        setListStyle(VestListStyle);\n        break;\n\n      case 'batiks':\n        setListStyle(BatikListStyle);\n        break;\n\n      case 'shirts':\n        setListStyle(ShirtListStyle);\n        break;\n\n      case 'trousers':\n        setListStyle(TrouserListStyle);\n        break;\n\n      case 'blazer':\n        setListStyle(BlazerListStyle);\n        break;\n    }\n  }, [category]);\n\n  var getCustomStyle = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var currentFabricSelect, _data$styles$collar, _data$styles$collar2, _data$styles$sleeve, _data$styles$sleeve2, _data$styles$chestpoc, _data$styles$chestpoc2, _data$styles$placket, _data$styles$placket2, placketName, isTucked, url, response, _response$data2, status, data, newDataStyle;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              currentFabricSelect = fabricSelect || fabricSelectRef.current;\n              console.log(currentFabricSelect);\n\n              if (currentFabricSelect) {\n                _context3.next = 6;\n                break;\n              }\n\n              console.log(\"No fabric selected\");\n              setIsLoadingFabric(false);\n              return _context3.abrupt(\"return\");\n\n            case 6:\n              _context3.prev = 6;\n              placketName = \"\", isTucked = false;\n\n              if (dataStyle.placket.name.split(\" \").length > 1) {\n                //* Check apakah isi nya \"Standar\" atau sudah lengkap dengan \"Body Untucked With Square\"\n                placketName = dataStyle.placket.name;\n              } else {\n                placketName = dataStyle.placket.name.concat(\" Body\", isTucked ? \"\" : \"Untucked\", \"With Square\");\n              }\n\n              url = \"/api/custom/custom_style?fabric=\".concat(currentFabricSelect._id, \"&collar=\").concat(dataStyle.collar.name, \"&cuffs=\").concat(dataStyle.cuffs.name, \"&sleeve=\").concat(dataStyle.sleeve.name, \"&bottom=\").concat(dataStyle.bottom.name, \"&chestpocket=\").concat(dataStyle.pocket.name, \"&placket=\").concat(dataStyle.placket.name, \"&pov=\").concat(pov);\n              _context3.next = 12;\n              return axios.get(url);\n\n            case 12:\n              response = _context3.sent;\n              console.log(url);\n              _response$data2 = response.data, status = _response$data2.status, data = _response$data2.data;\n              console.log(data);\n              newDataStyle = _objectSpread({}, dataStyle); // newDataStyle.bottom.name = data.bottom.name\n              // newDataStyle.bottom.image = data.bottom.image\n\n              newDataStyle.collar.name = ((_data$styles$collar = data.styles.collar) === null || _data$styles$collar === void 0 ? void 0 : _data$styles$collar.name) || \"\";\n              newDataStyle.collar.image = ((_data$styles$collar2 = data.styles.collar) === null || _data$styles$collar2 === void 0 ? void 0 : _data$styles$collar2.image) || \"\";\n              newDataStyle.sleeve.name = ((_data$styles$sleeve = data.styles.sleeve) === null || _data$styles$sleeve === void 0 ? void 0 : _data$styles$sleeve.name) || \"\";\n              newDataStyle.sleeve.image = ((_data$styles$sleeve2 = data.styles.sleeve) === null || _data$styles$sleeve2 === void 0 ? void 0 : _data$styles$sleeve2.image) || \"\";\n              newDataStyle.pocket.name = ((_data$styles$chestpoc = data.styles.chestpocket) === null || _data$styles$chestpoc === void 0 ? void 0 : _data$styles$chestpoc.name) || \"\";\n              newDataStyle.pocket.image = ((_data$styles$chestpoc2 = data.styles.chestpocket) === null || _data$styles$chestpoc2 === void 0 ? void 0 : _data$styles$chestpoc2.image) || \"\";\n              newDataStyle.placket.name = ((_data$styles$placket = data.styles.placket) === null || _data$styles$placket === void 0 ? void 0 : _data$styles$placket.name) || \"\";\n              newDataStyle.placket.image = ((_data$styles$placket2 = data.styles.placket) === null || _data$styles$placket2 === void 0 ? void 0 : _data$styles$placket2.image) || \"\";\n              fabric = fabricSelect;\n              console.log(fabricSelect._id);\n              setDataStyle(newDataStyle);\n              console.log(newDataStyle); // if(fabricSelect._id===\"6705fffa8f14879009126d1d\"){\n\n              newDataStyle.pleats.image = \"/img/pleats/red/Pleats Box Tucked.svg\";\n              newDataStyle.collarBack.image = \"/img/pleats/red/Collar Back.svg\";\n\n              if (dataStyle.placket.name === \"French\") {\n                newDataStyle.placketFold.image = \"/img/folded/red/pleats/Placket French Body Folded.svg\";\n              } else if (dataStyle.placket.name === \"Hidden\") {\n                newDataStyle.placketFold.image = \"/img/folded/red/pleats/Placket Hidden Body Folded.svg\";\n              } else if (dataStyle.placket.name === \"Standard\") {\n                newDataStyle.placketFold.image = \"/img/folded/red/pleats/Placket Standard Body Folded.svg\";\n              }\n\n              if (dataStyle.collar.name === \"Stand Up\") {\n                newDataStyle.collarFold.image = \"/img/folded/red/collar/Collar Stand Up Placket French Folded.svg\";\n              } else if (dataStyle.collar.name === \"Button Down\") {\n                newDataStyle.collarFold.image = \"/img/folded/red/collar/Collar Button Down Placket French Folded.svg\";\n              } else if (dataStyle.collar.name === \"Cutaway\") {\n                newDataStyle.collarFold.image = \"/img/folded/red/collar/Collar Cutaway Placket French Folded.svg\";\n              } else if (dataStyle.collar.name === \"Kent Collar\") {\n                newDataStyle.collarFold.image = \"/img/folded/red/collar/Collar Kent Collar Placket French Folded.svg\";\n              } else if (dataStyle.collar.name === \"New Kent\") {\n                newDataStyle.collarFold.image = \"/img/folded/red/collar/Collar New Kent Placket French Folded.svg\";\n              } else if (dataStyle.collar.name === \"Pinned\") {\n                newDataStyle.collarFold.image = \"/img/folded/red/collar/Collar Pinned Placket French Folded.svg\";\n              } else if (dataStyle.collar.name === \"Rounded\") {\n                newDataStyle.collarFold.image = \"/img/folded/red/collar/Collar Rounded Placket French Folded.svg\";\n              } else if (dataStyle.collar.name === \"Wing\") {\n                newDataStyle.collarFold.image = \"/img/folded/red/collar/Collar Wing Placket French Folded.svg\";\n              } else if (dataStyle.collar.name === \"Long\") {\n                newDataStyle.collarFold.image = \"/img/folded/red/collar/Collar Long Placket French Folded.svg\";\n              } else if (dataStyle.collar.name === \"Short Classic\") {}\n\n              if (dataStyle.pocket.name === \"No Pocket\") {} else if (dataStyle.pocket.name === \"Standard\") {\n                newDataStyle.pocketFold.image = \"/img/folded/red/pocket/Chestpocket Standard Folded.svg\";\n              } else if (dataStyle.pocket.name === \"With Flap\") {\n                newDataStyle.pocketFold.image = \"/img/folded/red/pocket/Chestpocket With Flap Folded.svg\";\n              } else if (dataStyle.pocket.name === \"Double Standard\") {\n                newDataStyle.pocketFold.image = \"/img/folded/red/pocket/Chestpocket Double Standard Folded.svg\";\n              } else if (dataStyle.pocket.name === \"Double With Flap\") {\n                newDataStyle.pocketFold.image = \"/img/folded/red/pocket/Chestpocket Double With Flap Folded.svg\";\n              }\n\n              if (dataStyle.cuffs.name === \"Double Rounded French\") {\n                newDataStyle.cuffsFold.image = \"/img/folded/red/sleeve/Cuffs Double Rounded French Folded.svg\";\n              } else if (dataStyle.cuffs.name === \"Double Square French\") {} else if (dataStyle.cuffs.name === \"Rounded One\") {\n                newDataStyle.cuffsFold.image = \"/img/folded/red/sleeve/Cuffs Rounded One Button Folded.svg\";\n              } else if (dataStyle.cuffs.name === \"Rounded Two\") {} else if (dataStyle.cuffs.name === \"Square French\") {\n                newDataStyle.cuffsFold.image = \"/img/folded/red/sleeve/Cuffs Square French Folded.svg\";\n              } else if (dataStyle.cuffs.name === \"Single One Button\") {} else if (dataStyle.cuffs.name === \"Single Two Button\") {} else if (dataStyle.cuffs.name === \"One Button Cut\") {\n                newDataStyle.cuffsFold.image = \"/img/folded/red/sleeve/Cuffs One Button Cut  Folded.svg\";\n              } else if (dataStyle.cuffs.name === \"Two Button Cut\") {} else if (dataStyle.cuffs.name === \"Short\") {\n                newDataStyle.cuffsFold.image = \"/img/folded/red/sleeve/Sleeve Short Folded.svg\";\n              }\n\n              _context3.next = 40;\n              break;\n\n            case 37:\n              _context3.prev = 37;\n              _context3.t0 = _context3[\"catch\"](6);\n              console.log(_context3.t0);\n\n            case 40:\n              _context3.prev = 40;\n              setTimeout(function () {\n                setIsLoading(false);\n              }, 700);\n              setTimeout(function () {\n                setIsLoadingFabric(false);\n              }, 1000);\n              return _context3.finish(40);\n\n            case 44:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[6, 37, 40, 44]]);\n    }));\n\n    return function getCustomStyle() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return {\n    openStyle: openStyle,\n    listStyle: listStyle,\n    fabricList: fabricList,\n    styleSelect: styleSelect,\n    fabricSelect: fabricSelect,\n    dataStyle: dataStyle,\n    isLoading: isLoading,\n    isLoadingFabric: isLoadingFabric,\n    pov: pov,\n    updatePov: updatePov,\n    setPov: setPov,\n    setDataStyle: setDataStyle,\n    setIsLoading: setIsLoading,\n    setOpenStyle: setOpenStyle,\n    setFabricList: setFabricList,\n    setStyleSelect: setStyleSelect,\n    setFabricSelect: setFabricSelect,\n    setIsLoadingFabric: setIsLoadingFabric\n  };\n};\n\nexport default useHookCustom;","map":null,"metadata":{},"sourceType":"module"}
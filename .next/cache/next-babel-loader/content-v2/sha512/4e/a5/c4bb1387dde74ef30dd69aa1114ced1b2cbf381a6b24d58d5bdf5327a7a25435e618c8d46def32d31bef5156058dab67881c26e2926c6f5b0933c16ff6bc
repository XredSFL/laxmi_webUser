{"ast":null,"code":"import axios from \"../../../helpers/axiosConfig\";\nimport jwtDecode from 'jwt-decode';\nexport default async function handler(req, res) {\n  console.log(req.headers);\n\n  if (req.method === 'POST') {\n    const {\n      email,\n      password\n    } = req.body;\n    axios.post(\"/auth/login\", {\n      email: email,\n      password: password\n    }).then(response => {\n      const {\n        status,\n        message\n      } = response.data;\n      console.log(\"responses\");\n      console.log(response);\n\n      if (status) {\n        const {\n          _id,\n          status,\n          role,\n          name,\n          token\n        } = response.data.data;\n        const jsonDecode = jwtDecode(token);\n        console.log(jsonDecode);\n        res.status(200).json({\n          \"status\": true,\n          \"message\": \"Login success\",\n          \"data\": {\n            \"name\": name,\n            \"email\": email,\n            \"phone\": \"081259539154\",\n            \"height\": 12,\n            \"weight\": 12,\n            \"age\": 12,\n            \"token\": token,\n            \"role\": role\n          }\n        });\n      } else {\n        res.status(200).json({\n          \"status\": false,\n          \"message\": message\n        });\n      }\n    }).catch(e => {\n      const {\n        message\n      } = e.response.data;\n      res.status(200).json({\n        \"status\": false,\n        \"message\": message\n      });\n    });\n  }\n}","map":{"version":3,"sources":["D:/luarKampus/Magang/Bestada/laxmi.front.web.user/pages/api/auth/signin.js"],"names":["axios","jwtDecode","handler","req","res","console","log","headers","method","email","password","body","post","then","response","status","message","data","_id","role","name","token","jsonDecode","json","catch","e"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,8BAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,eAAe,eAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC5CC,EAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,OAAhB;;AACA,MAAIJ,GAAG,CAACK,MAAJ,KAAe,MAAnB,EAA2B;AACvB,UAAM;AAAEC,MAAAA,KAAF;AAASC,MAAAA;AAAT,QAAsBP,GAAG,CAACQ,IAAhC;AACAX,IAAAA,KAAK,CAACY,IAAN,CAAW,aAAX,EAA0B;AACtBH,MAAAA,KAAK,EAAEA,KADe;AAEtBC,MAAAA,QAAQ,EAAEA;AAFY,KAA1B,EAGGG,IAHH,CAGSC,QAAD,IAAc;AAClB,YAAM;AAAEC,QAAAA,MAAF;AAAUC,QAAAA;AAAV,UAAsBF,QAAQ,CAACG,IAArC;AACAZ,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYQ,QAAZ;;AACA,UAAIC,MAAJ,EAAY;AACR,cAAM;AAAEG,UAAAA,GAAF;AAAOH,UAAAA,MAAP;AAAeI,UAAAA,IAAf;AAAqBC,UAAAA,IAArB;AAA2BC,UAAAA;AAA3B,YAAqCP,QAAQ,CAACG,IAAT,CAAcA,IAAzD;AACA,cAAMK,UAAU,GAAGrB,SAAS,CAACoB,KAAD,CAA5B;AACAhB,QAAAA,OAAO,CAACC,GAAR,CAAYgB,UAAZ;AACAlB,QAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBQ,IAAhB,CAAqB;AACjB,oBAAU,IADO;AAEjB,qBAAW,eAFM;AAGjB,kBAAQ;AACJ,oBAAQH,IADJ;AAEJ,qBAASX,KAFL;AAGJ,qBAAS,cAHL;AAIJ,sBAAU,EAJN;AAKJ,sBAAU,EALN;AAMJ,mBAAO,EANH;AAOJ,qBAASY,KAPL;AAQJ,oBAAQF;AARJ;AAHS,SAArB;AAcH,OAlBD,MAkBO;AACHf,QAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBQ,IAAhB,CAAqB;AACjB,oBAAU,KADO;AAEjB,qBAAWP;AAFM,SAArB;AAIH;AACJ,KA/BD,EA+BGQ,KA/BH,CA+BUC,CAAD,IAAO;AACZ,YAAM;AAAET,QAAAA;AAAF,UAAcS,CAAC,CAACX,QAAF,CAAWG,IAA/B;AACAb,MAAAA,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBQ,IAAhB,CAAqB;AACjB,kBAAU,KADO;AAEjB,mBAAWP;AAFM,OAArB;AAIH,KArCD;AAsCH;AACJ","sourcesContent":["import axios from \"../../../helpers/axiosConfig\"\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nexport default async function handler(req, res) {\r\n    console.log(req.headers);\r\n    if (req.method === 'POST') {\r\n        const { email, password } = req.body\r\n        axios.post(\"/auth/login\", {\r\n            email: email,\r\n            password: password\r\n        }).then((response) => {\r\n            const { status, message } = response.data\r\n            console.log(\"responses\")\r\n            console.log(response)\r\n            if (status) {\r\n                const { _id, status, role, name, token } = response.data.data\r\n                const jsonDecode = jwtDecode(token)\r\n                console.log(jsonDecode);\r\n                res.status(200).json({\r\n                    \"status\": true,\r\n                    \"message\": \"Login success\",\r\n                    \"data\": {\r\n                        \"name\": name,\r\n                        \"email\": email,\r\n                        \"phone\": \"081259539154\",\r\n                        \"height\": 12,\r\n                        \"weight\": 12,\r\n                        \"age\": 12,\r\n                        \"token\": token,\r\n                        \"role\": role\r\n                    }\r\n                })\r\n            } else {\r\n                res.status(200).json({\r\n                    \"status\": false,\r\n                    \"message\": message\r\n                })\r\n            }\r\n        }).catch((e) => {\r\n            const { message } = e.response.data\r\n            res.status(200).json({\r\n                \"status\": false,\r\n                \"message\": message,\r\n            })\r\n        })\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport axios from \"axios\";\nimport { useRouter } from \"next/router\";\nimport { useCallback, useEffect, useState, useRef } from \"react\";\nimport { BlazerListStyle, ShirtListStyle, TrouserListStyle, VestListStyle, BatikListStyle } from './sidebar/dataSidebar';\nconst initStyle = {\n  \"bottom\": {\n    \"image\": \"\",\n    \"name\": \"Square\"\n  },\n  \"collar\": {\n    \"image\": \"\",\n    \"name\": \"Stand Up\"\n  },\n  \"collarBack\": {\n    \"image\": \"/img/pleats/red/Collar Back.svg\",\n    \"name\": \"Stand Up\"\n  },\n  \"sleeve\": {\n    \"image\": \"\",\n    \"name\": \"Short\"\n  },\n  \"cuffs\": {\n    \"image\": \"\",\n    \"name\": \"Square French\"\n  },\n  \"cuffsBack\": {\n    \"image\": \"/img/sleeve_back/Cuffs Double Rounded French Back.svg\",\n    \"name\": \"Square French\"\n  },\n  \"pocket\": {\n    \"image\": \"\",\n    \"name\": \"With Flap\"\n  },\n  \"placket\": {\n    \"image\": \"\",\n    \"name\": \"Standard Body Untucked With Square\"\n  },\n  \"pleats\": {\n    \"image\": \"/img/pleats/red/Pleats Box Tucked.svg\",\n    \"name\": \"Pleats\"\n  },\n  \"collarFold\": {\n    \"image\": \"\"\n  },\n  \"cuffsFold\": {\n    \"image\": \"\"\n  },\n  \"pocketFold\": {\n    \"image\": \"\" // \"image\":\"/img/pleats/red/Chest Pocket Folded.svg\"\n\n  },\n  \"placketFold\": {\n    \"image\": \"/img/folded/red/pleats/Placket Standard Body Folded.svg\"\n  }\n};\n\nconst useHookCustom = (initialPov = 'FRONT') => {\n  const {\n    0: fabricList,\n    1: setFabricList\n  } = useState([]);\n  const {\n    0: dataStyle,\n    1: setDataStyle\n  } = useState(initStyle);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: isLoadingFabric,\n    1: setIsLoadingFabric\n  } = useState(false);\n  const {\n    0: pov,\n    1: setPov\n  } = useState(initialPov);\n  const fabricSelectRef = useRef(null);\n  const updatePov = useCallback(newPov => {\n    console.log('Updating POV to:', newPov);\n    setPov(newPov);\n  }, []);\n  const setFabricSelect = useCallback(fabric => {\n    console.log('Setting fabricSelect:', fabric);\n    fabricSelectRef.current = fabric;\n  }, []);\n  const getCustomStyle = useCallback(async () => {\n    console.log(\"Getting custom style for POV:\", pov);\n    console.log(\"Current fabricSelect:\", fabricSelectRef.current);\n    setIsLoading(true);\n    setIsLoadingFabric(true);\n\n    try {\n      if (!fabricSelectRef.current || !fabricSelectRef.current._id) {\n        console.error(\"No fabric selected or fabric ID is missing\");\n        return;\n      }\n\n      let url = new URL('/api/custom/custom_style', window.location.origin);\n      let params = new URLSearchParams({\n        fabric: fabricSelectRef.current._id,\n        collar: dataStyle.collar.name,\n        cuffs: dataStyle.cuffs.name,\n        sleeve: dataStyle.sleeve.name,\n        bottom: dataStyle.bottom.name,\n        chestpocket: dataStyle.pocket.name,\n        placket: dataStyle.placket.name,\n        pov: pov\n      });\n      url.search = params.toString();\n      console.log(\"Request URL:\", url.toString());\n      const response = await axios.get(url.toString());\n      console.log(\"API Response:\", response.data);\n      const {\n        status,\n        data\n      } = response.data;\n\n      if (status) {\n        setDataStyle(prevState => {\n          var _data$styles$collar, _data$styles$collar2, _data$styles$sleeve, _data$styles$sleeve2, _data$styles$chestpoc, _data$styles$chestpoc2, _data$styles$placket, _data$styles$placket2, _data$styles$cuffs, _data$styles$cuffs2, _data$styles$bottom, _data$styles$bottom2, _data$styles$collarBa, _data$styles$collarBa2, _data$styles$cuffsBac, _data$styles$cuffsBac2, _data$styles$pocketFo, _data$styles$pocketFo2, _data$styles$placketF, _data$styles$placketF2, _data$styles$collarFo, _data$styles$collarFo2, _data$styles$cuffsFol, _data$styles$cuffsFol2;\n\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            collar: {\n              name: ((_data$styles$collar = data.styles.collar) === null || _data$styles$collar === void 0 ? void 0 : _data$styles$collar.name) || prevState.collar.name,\n              image: ((_data$styles$collar2 = data.styles.collar) === null || _data$styles$collar2 === void 0 ? void 0 : _data$styles$collar2.image) || prevState.collar.image\n            },\n            sleeve: {\n              name: ((_data$styles$sleeve = data.styles.sleeve) === null || _data$styles$sleeve === void 0 ? void 0 : _data$styles$sleeve.name) || prevState.sleeve.name,\n              image: ((_data$styles$sleeve2 = data.styles.sleeve) === null || _data$styles$sleeve2 === void 0 ? void 0 : _data$styles$sleeve2.image) || prevState.sleeve.image\n            },\n            pocket: {\n              name: ((_data$styles$chestpoc = data.styles.chestpocket) === null || _data$styles$chestpoc === void 0 ? void 0 : _data$styles$chestpoc.name) || prevState.pocket.name,\n              image: ((_data$styles$chestpoc2 = data.styles.chestpocket) === null || _data$styles$chestpoc2 === void 0 ? void 0 : _data$styles$chestpoc2.image) || prevState.pocket.image\n            },\n            placket: {\n              name: ((_data$styles$placket = data.styles.placket) === null || _data$styles$placket === void 0 ? void 0 : _data$styles$placket.name) || prevState.placket.name,\n              image: ((_data$styles$placket2 = data.styles.placket) === null || _data$styles$placket2 === void 0 ? void 0 : _data$styles$placket2.image) || prevState.placket.image\n            },\n            cuffs: {\n              name: ((_data$styles$cuffs = data.styles.cuffs) === null || _data$styles$cuffs === void 0 ? void 0 : _data$styles$cuffs.name) || prevState.cuffs.name,\n              image: ((_data$styles$cuffs2 = data.styles.cuffs) === null || _data$styles$cuffs2 === void 0 ? void 0 : _data$styles$cuffs2.image) || prevState.cuffs.image\n            },\n            bottom: {\n              name: ((_data$styles$bottom = data.styles.bottom) === null || _data$styles$bottom === void 0 ? void 0 : _data$styles$bottom.name) || prevState.bottom.name,\n              image: ((_data$styles$bottom2 = data.styles.bottom) === null || _data$styles$bottom2 === void 0 ? void 0 : _data$styles$bottom2.image) || prevState.bottom.image\n            },\n            collarBack: {\n              name: ((_data$styles$collarBa = data.styles.collarBack) === null || _data$styles$collarBa === void 0 ? void 0 : _data$styles$collarBa.name) || prevState.collarBack.name,\n              image: ((_data$styles$collarBa2 = data.styles.collarBack) === null || _data$styles$collarBa2 === void 0 ? void 0 : _data$styles$collarBa2.image) || prevState.collarBack.image\n            },\n            cuffsBack: {\n              name: ((_data$styles$cuffsBac = data.styles.cuffsBack) === null || _data$styles$cuffsBac === void 0 ? void 0 : _data$styles$cuffsBac.name) || prevState.cuffsBack.name,\n              image: ((_data$styles$cuffsBac2 = data.styles.cuffsBack) === null || _data$styles$cuffsBac2 === void 0 ? void 0 : _data$styles$cuffsBac2.image) || prevState.cuffsBack.image\n            },\n            pocketFold: {\n              name: ((_data$styles$pocketFo = data.styles.pocketFold) === null || _data$styles$pocketFo === void 0 ? void 0 : _data$styles$pocketFo.name) || prevState.pocketFold.name,\n              image: ((_data$styles$pocketFo2 = data.styles.pocketFold) === null || _data$styles$pocketFo2 === void 0 ? void 0 : _data$styles$pocketFo2.image) || prevState.pocketFold.image\n            },\n            placketFold: {\n              name: ((_data$styles$placketF = data.styles.placketFold) === null || _data$styles$placketF === void 0 ? void 0 : _data$styles$placketF.name) || prevState.placketFold.name,\n              image: ((_data$styles$placketF2 = data.styles.placketFold) === null || _data$styles$placketF2 === void 0 ? void 0 : _data$styles$placketF2.image) || prevState.placketFold.image\n            },\n            collarFold: {\n              name: ((_data$styles$collarFo = data.styles.collarFold) === null || _data$styles$collarFo === void 0 ? void 0 : _data$styles$collarFo.name) || prevState.collarFold.name,\n              image: ((_data$styles$collarFo2 = data.styles.collarFold) === null || _data$styles$collarFo2 === void 0 ? void 0 : _data$styles$collarFo2.image) || prevState.collarFold.image\n            },\n            cuffsFold: {\n              name: ((_data$styles$cuffsFol = data.styles.cuffsFold) === null || _data$styles$cuffsFol === void 0 ? void 0 : _data$styles$cuffsFol.name) || prevState.cuffsFold.name,\n              image: ((_data$styles$cuffsFol2 = data.styles.cuffsFold) === null || _data$styles$cuffsFol2 === void 0 ? void 0 : _data$styles$cuffsFol2.image) || prevState.cuffsFold.image\n            }\n          });\n        });\n      } else {\n        console.error(\"API returned error status\");\n      }\n    } catch (e) {\n      console.error(\"Error in getCustomStyle:\", e);\n    } finally {\n      setIsLoading(false);\n      setIsLoadingFabric(false);\n    }\n  }, [pov, dataStyle]);\n  useEffect(() => {\n    console.log('POV changed in useHookCustom:', pov);\n    console.log('Current fabricSelect when POV changed:', fabricSelectRef.current);\n\n    if (fabricSelectRef.current && fabricSelectRef.current._id && pov) {\n      getCustomStyle();\n    }\n  }, [pov, getCustomStyle]);\n  return {\n    fabricList,\n    setFabricList,\n    fabricSelect: fabricSelectRef.current,\n    setFabricSelect,\n    dataStyle,\n    setDataStyle,\n    isLoading,\n    isLoadingFabric,\n    pov,\n    updatePov,\n    getCustomStyle\n  };\n};\n\nexport default useHookCustom;","map":{"version":3,"sources":["D:/luarKampus/Magang/Bestada/laxmi.front.web.user/components/partials/custom/hookCustom.js"],"names":["axios","useRouter","useCallback","useEffect","useState","useRef","BlazerListStyle","ShirtListStyle","TrouserListStyle","VestListStyle","BatikListStyle","initStyle","useHookCustom","initialPov","fabricList","setFabricList","dataStyle","setDataStyle","isLoading","setIsLoading","isLoadingFabric","setIsLoadingFabric","pov","setPov","fabricSelectRef","updatePov","newPov","console","log","setFabricSelect","fabric","current","getCustomStyle","_id","error","url","URL","window","location","origin","params","URLSearchParams","collar","name","cuffs","sleeve","bottom","chestpocket","pocket","placket","search","toString","response","get","data","status","prevState","styles","image","collarBack","cuffsBack","pocketFold","placketFold","collarFold","cuffsFold","e","fabricSelect"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useCallback, useEffect, useState, useRef } from \"react\";\r\nimport {\r\n  BlazerListStyle,\r\n  ShirtListStyle,\r\n  TrouserListStyle,\r\n  VestListStyle,\r\n  BatikListStyle\r\n} from './sidebar/dataSidebar';\r\n\r\nconst initStyle = {\r\n  \"bottom\": {\r\n    \"image\": \"\",\r\n    \"name\": \"Square\"\r\n  },\r\n  \"collar\": {\r\n    \"image\": \"\",\r\n    \"name\": \"Stand Up\"\r\n  },\r\n  \"collarBack\": {\r\n    \"image\": \"/img/pleats/red/Collar Back.svg\",\r\n    \"name\": \"Stand Up\"\r\n  },\r\n  \"sleeve\": {\r\n    \"image\": \"\",\r\n    \"name\": \"Short\"\r\n  },\r\n  \"cuffs\": {\r\n    \"image\": \"\",\r\n    \"name\": \"Square French\"\r\n  },\r\n  \"cuffsBack\": {\r\n    \"image\": \"/img/sleeve_back/Cuffs Double Rounded French Back.svg\",\r\n    \"name\": \"Square French\"\r\n  },\r\n  \"pocket\": {\r\n    \"image\": \"\",\r\n    \"name\": \"With Flap\"\r\n  },\r\n  \"placket\": {\r\n    \"image\": \"\",\r\n    \"name\": \"Standard Body Untucked With Square\"\r\n  },\r\n  \"pleats\": {\r\n    \"image\": \"/img/pleats/red/Pleats Box Tucked.svg\",\r\n    \"name\": \"Pleats\"\r\n  },\r\n  \"collarFold\": {\r\n    \"image\": \"\"\r\n  },\r\n  \"cuffsFold\": {\r\n    \"image\": \"\"\r\n  },\r\n  \"pocketFold\": {\r\n    \"image\": \"\"\r\n    // \"image\":\"/img/pleats/red/Chest Pocket Folded.svg\"\r\n  },\r\n  \"placketFold\": {\r\n    \"image\": \"/img/folded/red/pleats/Placket Standard Body Folded.svg\"\r\n  }\r\n};\r\n\r\nconst useHookCustom = (initialPov = 'FRONT') => {\r\n  const [fabricList, setFabricList] = useState([]);\r\n  const [dataStyle, setDataStyle] = useState(initStyle);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isLoadingFabric, setIsLoadingFabric] = useState(false);\r\n  const [pov, setPov] = useState(initialPov);\r\n\r\n  const fabricSelectRef = useRef(null);\r\n\r\n  const updatePov = useCallback((newPov) => {\r\n    console.log('Updating POV to:', newPov);\r\n    setPov(newPov);\r\n  }, []);\r\n\r\n  const setFabricSelect = useCallback((fabric) => {\r\n    console.log('Setting fabricSelect:', fabric);\r\n    fabricSelectRef.current = fabric;\r\n  }, []);\r\n\r\n  const getCustomStyle = useCallback(async () => {\r\n    console.log(\"Getting custom style for POV:\", pov);\r\n    console.log(\"Current fabricSelect:\", fabricSelectRef.current);\r\n\r\n    setIsLoading(true);\r\n    setIsLoadingFabric(true);\r\n\r\n    try {\r\n      if (!fabricSelectRef.current || !fabricSelectRef.current._id) {\r\n        console.error(\"No fabric selected or fabric ID is missing\");\r\n        return;\r\n      }\r\n\r\n      let url = new URL('/api/custom/custom_style', window.location.origin);\r\n      let params = new URLSearchParams({\r\n        fabric: fabricSelectRef.current._id,\r\n        collar: dataStyle.collar.name,\r\n        cuffs: dataStyle.cuffs.name,\r\n        sleeve: dataStyle.sleeve.name,\r\n        bottom: dataStyle.bottom.name,\r\n        chestpocket: dataStyle.pocket.name,\r\n        placket: dataStyle.placket.name,\r\n        pov: pov\r\n      });\r\n\r\n      url.search = params.toString();\r\n\r\n      console.log(\"Request URL:\", url.toString());\r\n\r\n      const response = await axios.get(url.toString());\r\n      console.log(\"API Response:\", response.data);\r\n\r\n      const { status, data } = response.data;\r\n      if (status) {\r\n        setDataStyle(prevState => ({\r\n          ...prevState,\r\n          collar: {\r\n            name: data.styles.collar?.name || prevState.collar.name,\r\n            image: data.styles.collar?.image || prevState.collar.image\r\n          },\r\n          sleeve: {\r\n            name: data.styles.sleeve?.name || prevState.sleeve.name,\r\n            image: data.styles.sleeve?.image || prevState.sleeve.image\r\n          },\r\n          pocket: {\r\n            name: data.styles.chestpocket?.name || prevState.pocket.name,\r\n            image: data.styles.chestpocket?.image || prevState.pocket.image\r\n          },\r\n          placket: {\r\n            name: data.styles.placket?.name || prevState.placket.name,\r\n            image: data.styles.placket?.image || prevState.placket.image\r\n          },\r\n          cuffs: {\r\n            name: data.styles.cuffs?.name || prevState.cuffs.name,\r\n            image: data.styles.cuffs?.image || prevState.cuffs.image\r\n          },\r\n          bottom: {\r\n            name: data.styles.bottom?.name || prevState.bottom.name,\r\n            image: data.styles.bottom?.image || prevState.bottom.image\r\n          },\r\n          collarBack: {\r\n            name: data.styles.collarBack?.name || prevState.collarBack.name,\r\n            image: data.styles.collarBack?.image || prevState.collarBack.image\r\n          },\r\n          cuffsBack: {\r\n            name: data.styles.cuffsBack?.name || prevState.cuffsBack.name,\r\n            image: data.styles.cuffsBack?.image || prevState.cuffsBack.image\r\n          },\r\n          pocketFold: {\r\n            name: data.styles.pocketFold?.name || prevState.pocketFold.name,\r\n            image: data.styles.pocketFold?.image || prevState.pocketFold.image\r\n          },\r\n          placketFold: {\r\n            name: data.styles.placketFold?.name || prevState.placketFold.name,\r\n            image: data.styles.placketFold?.image || prevState.placketFold.image\r\n          },\r\n          collarFold: {\r\n            name: data.styles.collarFold?.name || prevState.collarFold.name,\r\n            image: data.styles.collarFold?.image || prevState.collarFold.image\r\n          },\r\n          cuffsFold: {\r\n            name: data.styles.cuffsFold?.name || prevState.cuffsFold.name,\r\n            image: data.styles.cuffsFold?.image || prevState.cuffsFold.image\r\n          },\r\n        }));\r\n      } else {\r\n        console.error(\"API returned error status\");\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Error in getCustomStyle:\", e);\r\n    } finally {\r\n      setIsLoading(false);\r\n      setIsLoadingFabric(false);\r\n    }\r\n  }, [pov, dataStyle]);\r\n\r\n  useEffect(() => {\r\n    console.log('POV changed in useHookCustom:', pov);\r\n    console.log('Current fabricSelect when POV changed:', fabricSelectRef.current);\r\n    if (fabricSelectRef.current && fabricSelectRef.current._id && pov) {\r\n      getCustomStyle();\r\n    }\r\n  }, [pov, getCustomStyle]);\r\n\r\n  return {\r\n    fabricList,\r\n    setFabricList,\r\n    fabricSelect: fabricSelectRef.current,\r\n    setFabricSelect,\r\n    dataStyle,\r\n    setDataStyle,\r\n    isLoading,\r\n    isLoadingFabric,\r\n    pov,\r\n    updatePov,\r\n    getCustomStyle\r\n  };\r\n};\r\n\r\nexport default useHookCustom;"]},"metadata":{},"sourceType":"module"}
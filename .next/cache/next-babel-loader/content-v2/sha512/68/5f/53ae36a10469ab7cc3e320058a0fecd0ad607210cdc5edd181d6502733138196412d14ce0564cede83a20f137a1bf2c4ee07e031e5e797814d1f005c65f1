{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/router'; // REDUX\n\nimport { connect } from 'react-redux';\nimport { fetcAction } from '../../../stores'; // modules\n\nimport SubCategory from './modules/subCategory'; // elements\n\nimport Pagination from '../../elements/pagination'; // components\n\nimport Product from '../../elements/product/productDefault';\n\nconst ProductList = ({\n  t,\n  fetcAction,\n  fetchResult\n}) => {\n  const router = useRouter();\n  const {\n    category\n  } = router.query;\n  const {\n    0: params,\n    1: setParams\n  } = useState({\n    page: 1,\n    per_page: 9,\n    sort_by: 'hightolower',\n    sub_category: '',\n    category: category,\n    style: '',\n    material: '',\n    color: '',\n    pattern: '',\n    season: '',\n    collections: ''\n  });\n  useEffect(() => {\n    let paramsValue = _objectSpread(_objectSpread({}, params), {}, {\n      sub_category: params.sub_category._id,\n      style: params.style._id,\n      material: params.material._id,\n      color: params.color._id,\n      pattern: params.pattern._id,\n      season: params.season._id,\n      collections: params.collections._id\n    });\n\n    fetcAction('/products', paramsValue, {\n      body: JSON.stringify({\n        type: category\n      })\n    });\n  }, [params]);\n  useEffect(() => {\n    setParams({\n      page: 1,\n      per_page: 9,\n      sort_by: 'hightolower',\n      sub_category: '',\n      category: category,\n      style: '',\n      material: '',\n      color: '',\n      pattern: '',\n      season: '',\n      collections: ''\n    });\n  }, [category]); // handle\n\n  const handlePaginate = e => {\n    setParams(_objectSpread(_objectSpread({}, params), {}, {\n      page: e.selected + 1\n    }));\n  };\n\n  const handleFilter = e => {\n    setParams(_objectSpread(_objectSpread({}, params), {}, {\n      page: 1,\n      sort_by: e.target.value\n    }));\n  };\n\n  const handleSubCategory = (e, name) => {\n    setParams(_objectSpread(_objectSpread({}, params), {}, {\n      page: 1,\n      [name]: e\n    }));\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"container-fluid \",\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"w-100 d-flex justify-content-end align-items-center\",\n      children: [/*#__PURE__*/_jsxs(\"p\", {\n        className: \"pr-5 mb-0 sort-by\",\n        children: [t('Sort by'), \" : \"]\n      }), /*#__PURE__*/_jsxs(\"select\", {\n        value: params.filter,\n        onChange: handleFilter,\n        className: \"form-select select-filter\",\n        \"aria-label\": \"sort\",\n        children: [/*#__PURE__*/_jsx(\"option\", {\n          value: \"hightolower\",\n          children: t('Highest Price')\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: \"lowertohight\",\n          children: t('Lowest Price')\n        }), /*#__PURE__*/_jsx(\"option\", {\n          value: \"latest\",\n          children: t('Latest')\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(\"hr\", {\n      className: \"w-100 hr-filter\"\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"col-12 col-md-3 col-xxl-2 mt-5\",\n        children: /*#__PURE__*/_jsx(SubCategory, {\n          t: t,\n          handleSubCategory: handleSubCategory,\n          params: params\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"col-12 col-md-9 col-xxl-10 product-list-container\",\n        children: fetchResult.data ? fetchResult.data.data.length ? /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"row\",\n            children: fetchResult.data.data.map((data, index) => /*#__PURE__*/_jsx(Product, {\n              t: t,\n              data: data\n            }, index))\n          }), fetchResult.data.total_page > 1 ? /*#__PURE__*/_jsx(Pagination, {\n            currentPage: params.page - 1,\n            pageCount: fetchResult.data.total_page,\n            handlePaginate: handlePaginate\n          }) : null]\n        }) : /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-center\",\n          children: t('common:There are no data yet')\n        }) : fetchResult.error ? /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-center\",\n          children: fetchResult.error\n        }) : /*#__PURE__*/_jsx(\"div\", {\n          className: \"loader\"\n        })\n      })]\n    })]\n  });\n};\n\nconst mapStateToProps = state => {\n  return {\n    fetchResult: state.fetchList\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetcAction: (url, params) => dispatch(fetcAction(url, params))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductList);","map":null,"metadata":{},"sourceType":"module"}